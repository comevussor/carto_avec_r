<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapitre 2 Cartographie thématique | Cartographie avec R</title>
  <meta name="description" content="Matériel pour le cours de cartographie avec R">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapitre 2 Cartographie thématique | Cartographie avec R />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="img/cartomix.png" />
  <meta property="og:description" content="Matériel pour le cours de cartographie avec R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 2 Cartographie thématique | Cartographie avec R />
  
  <meta name="twitter:description" content="Matériel pour le cours de cartographie avec R" />
  <meta name="twitter:image" content="img/cartomix.png" />

<meta name="author" content="Timothée Giraud &amp; Hugues Pécout">


<meta name="date" content="2018-12-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="jour1.html">
<link rel="next" href="jour3.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Cartographie avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="jour1.html"><a href="jour1.html"><i class="fa fa-check"></i><b>1</b> Les données spatiales</a><ul>
<li class="chapter" data-level="1.1" data-path="jour1.html"><a href="jour1.html#le-package-sf"><i class="fa fa-check"></i><b>1.1</b> Le package <code>sf</code></a><ul>
<li class="chapter" data-level="1.1.1" data-path="jour1.html"><a href="jour1.html#format-des-objets-spatiaux-sf"><i class="fa fa-check"></i><b>1.1.1</b> Format des objets spatiaux <code>sf</code></a></li>
<li class="chapter" data-level="1.1.2" data-path="jour1.html"><a href="jour1.html#import-export"><i class="fa fa-check"></i><b>1.1.2</b> Import / Export</a></li>
<li class="chapter" data-level="1.1.3" data-path="jour1.html"><a href="jour1.html#affichage-de-donnees"><i class="fa fa-check"></i><b>1.1.3</b> Affichage de données</a></li>
<li class="chapter" data-level="1.1.4" data-path="jour1.html"><a href="jour1.html#joindre-des-donnees"><i class="fa fa-check"></i><b>1.1.4</b> Joindre des données</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="jour1.html"><a href="jour1.html#les-projections"><i class="fa fa-check"></i><b>1.2</b> Les projections</a></li>
<li class="chapter" data-level="1.3" data-path="jour1.html"><a href="jour1.html#operations-de-geotraitement"><i class="fa fa-check"></i><b>1.3</b> Opérations de géotraitement</a><ul>
<li class="chapter" data-level="1.3.1" data-path="jour1.html"><a href="jour1.html#extraire-des-centroides"><i class="fa fa-check"></i><b>1.3.1</b> Extraire des centroides</a></li>
<li class="chapter" data-level="1.3.2" data-path="jour1.html"><a href="jour1.html#creer-une-matrice-de-distances"><i class="fa fa-check"></i><b>1.3.2</b> Créer une matrice de distances</a></li>
<li class="chapter" data-level="1.3.3" data-path="jour1.html"><a href="jour1.html#agreger-des-polygones"><i class="fa fa-check"></i><b>1.3.3</b> Agréger des polygones</a></li>
<li class="chapter" data-level="1.3.4" data-path="jour1.html"><a href="jour1.html#construire-une-zone-tampon"><i class="fa fa-check"></i><b>1.3.4</b> Construire une zone tampon</a></li>
<li class="chapter" data-level="1.3.5" data-path="jour1.html"><a href="jour1.html#realiser-une-intersection"><i class="fa fa-check"></i><b>1.3.5</b> Réaliser une intersection</a></li>
<li class="chapter" data-level="1.3.6" data-path="jour1.html"><a href="jour1.html#construire-des-polygones-de-voronoi"><i class="fa fa-check"></i><b>1.3.6</b> Construire des polygones de Voronoi</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="jour1.html"><a href="jour1.html#le-package-raster"><i class="fa fa-check"></i><b>1.4</b> Le package <code>raster</code></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="jour2.html"><a href="jour2.html"><i class="fa fa-check"></i><b>2</b> Cartographie thématique</a><ul>
<li class="chapter" data-level="2.1" data-path="jour2.html"><a href="jour2.html#le-package-cartography"><i class="fa fa-check"></i><b>2.1</b> Le package <code>cartography</code></a><ul>
<li class="chapter" data-level="2.1.1" data-path="jour2.html"><a href="jour2.html#symboles-proportionnels"><i class="fa fa-check"></i><b>2.1.1</b> Symboles proportionnels</a></li>
<li class="chapter" data-level="2.1.2" data-path="jour2.html"><a href="jour2.html#carte-choroplethe"><i class="fa fa-check"></i><b>2.1.2</b> Carte choroplèthe</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="jour2.html"><a href="jour2.html#palettes-de-couleurs"><i class="fa fa-check"></i><b>2.2</b> Palettes de couleurs</a></li>
<li class="chapter" data-level="2.3" data-path="jour2.html"><a href="jour2.html#discretisations"><i class="fa fa-check"></i><b>2.3</b> Discrétisations</a></li>
<li class="chapter" data-level="2.4" data-path="jour2.html"><a href="jour2.html#combinaisons"><i class="fa fa-check"></i><b>2.4</b> Combinaisons</a></li>
<li class="chapter" data-level="2.5" data-path="jour2.html"><a href="jour2.html#labels"><i class="fa fa-check"></i><b>2.5</b> Labels</a></li>
<li class="chapter" data-level="2.6" data-path="jour2.html"><a href="jour2.html#les-donnees-osm"><i class="fa fa-check"></i><b>2.6</b> Les données OSM</a><ul>
<li class="chapter" data-level="2.6.1" data-path="jour2.html"><a href="jour2.html#donnees-vectorielles"><i class="fa fa-check"></i><b>2.6.1</b> Données vectorielles</a></li>
<li class="chapter" data-level="2.6.2" data-path="jour2.html"><a href="jour2.html#donnees-raster"><i class="fa fa-check"></i><b>2.6.2</b> Données raster</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="jour2.html"><a href="jour2.html#cartographie-interactive"><i class="fa fa-check"></i><b>2.7</b> Cartographie interactive</a></li>
<li class="chapter" data-level="2.8" data-path="jour2.html"><a href="jour2.html#geocodage-dadresses"><i class="fa fa-check"></i><b>2.8</b> Géocodage d’adresses</a></li>
<li class="chapter" data-level="2.9" data-path="jour2.html"><a href="jour2.html#creation-de-cartons"><i class="fa fa-check"></i><b>2.9</b> Création de cartons</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="jour3.html"><a href="jour3.html"><i class="fa fa-check"></i><b>3</b> Cartographie thématique avancée</a><ul>
<li class="chapter" data-level="3.1" data-path="jour3.html"><a href="jour3.html#les-anamorphoses"><i class="fa fa-check"></i><b>3.1</b> Les anamorphoses</a><ul>
<li class="chapter" data-level="3.1.1" data-path="jour3.html"><a href="jour3.html#les-cartogrammes-de-dorling"><i class="fa fa-check"></i><b>3.1.1</b> Les cartogrammes de Dorling</a></li>
<li class="chapter" data-level="3.1.2" data-path="jour3.html"><a href="jour3.html#le-principe"><i class="fa fa-check"></i><b>3.1.2</b> Le principe</a></li>
<li class="chapter" data-level="3.1.3" data-path="jour3.html"><a href="jour3.html#exemple"><i class="fa fa-check"></i><b>3.1.3</b> Exemple</a></li>
<li class="chapter" data-level="3.1.4" data-path="jour3.html"><a href="jour3.html#precautions-demploi"><i class="fa fa-check"></i><b>3.1.4</b> Précautions d’emploi</a></li>
<li class="chapter" data-level="3.1.5" data-path="jour3.html"><a href="jour3.html#les-cartogrammes-non-continus"><i class="fa fa-check"></i><b>3.1.5</b> Les cartogrammes non continus</a></li>
<li class="chapter" data-level="3.1.6" data-path="jour3.html"><a href="jour3.html#exemple-1"><i class="fa fa-check"></i><b>3.1.6</b> Exemple</a></li>
<li class="chapter" data-level="3.1.7" data-path="jour3.html"><a href="jour3.html#precautions-demploi-1"><i class="fa fa-check"></i><b>3.1.7</b> Précautions d’emploi</a></li>
<li class="chapter" data-level="3.1.8" data-path="jour3.html"><a href="jour3.html#les-cartogrammes-continus"><i class="fa fa-check"></i><b>3.1.8</b> Les cartogrammes continus</a></li>
<li class="chapter" data-level="3.1.9" data-path="jour3.html"><a href="jour3.html#exemple-2"><i class="fa fa-check"></i><b>3.1.9</b> Exemple</a></li>
<li class="chapter" data-level="3.1.10" data-path="jour3.html"><a href="jour3.html#precautions-demploi-2"><i class="fa fa-check"></i><b>3.1.10</b> Précautions d’emploi</a></li>
<li class="chapter" data-level="3.1.11" data-path="jour3.html"><a href="jour3.html#interets-des-anamorphoses"><i class="fa fa-check"></i><b>3.1.11</b> Interêts des anamorphoses</a></li>
<li class="chapter" data-level="3.1.12" data-path="jour3.html"><a href="jour3.html#faiblesses-des-anamorphoses"><i class="fa fa-check"></i><b>3.1.12</b> Faiblesses des anamorphoses</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="jour3.html"><a href="jour3.html#les-grilles-regulieres"><i class="fa fa-check"></i><b>3.2</b> Les grilles régulières</a><ul>
<li class="chapter" data-level="3.2.1" data-path="jour3.html"><a href="jour3.html#exemples"><i class="fa fa-check"></i><b>3.2.1</b> Exemples</a></li>
<li class="chapter" data-level="3.2.2" data-path="jour3.html"><a href="jour3.html#precautions-demploi-3"><i class="fa fa-check"></i><b>3.2.2</b> Précautions d’emploi</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="jour3.html"><a href="jour3.html#les-discontinuites"><i class="fa fa-check"></i><b>3.3</b> Les discontinuités</a><ul>
<li class="chapter" data-level="3.3.1" data-path="jour3.html"><a href="jour3.html#exemples-1"><i class="fa fa-check"></i><b>3.3.1</b> Exemples</a></li>
<li class="chapter" data-level="3.3.2" data-path="jour3.html"><a href="jour3.html#precautions-demploi-4"><i class="fa fa-check"></i><b>3.3.2</b> Précautions d’emploi</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="jour3.html"><a href="jour3.html#les-lissages"><i class="fa fa-check"></i><b>3.4</b> Les lissages</a><ul>
<li class="chapter" data-level="3.4.1" data-path="jour3.html"><a href="jour3.html#exemples-2"><i class="fa fa-check"></i><b>3.4.1</b> Exemples</a></li>
<li class="chapter" data-level="3.4.2" data-path="jour3.html"><a href="jour3.html#precautions-demploi-5"><i class="fa fa-check"></i><b>3.4.2</b> Précautions d’emploi</a></li>
<li class="chapter" data-level="3.4.3" data-path="jour3.html"><a href="jour3.html#kde"><i class="fa fa-check"></i><b>3.4.3</b> KDE</a></li>
<li class="chapter" data-level="3.4.4" data-path="jour3.html"><a href="jour3.html#stewart"><i class="fa fa-check"></i><b>3.4.4</b> Stewart</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="jour3.html"><a href="jour3.html#d"><i class="fa fa-check"></i><b>3.5</b> 3D</a><ul>
<li class="chapter" data-level="3.5.1" data-path="jour3.html"><a href="jour3.html#linemap"><i class="fa fa-check"></i><b>3.5.1</b> linemap</a></li>
<li class="chapter" data-level="3.5.2" data-path="jour3.html"><a href="jour3.html#rayshader"><i class="fa fa-check"></i><b>3.5.2</b> rayshader</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Voir le cours</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cartographie avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="jour2" class="section level1">
<h1><span class="header-section-number">Chapitre 2</span> Cartographie thématique</h1>
<div id="le-package-cartography" class="section level2">
<h2><span class="header-section-number">2.1</span> Le package <code>cartography</code></h2>
<p>Le package <code>cartography</code> permet de créer et intégrer des cartes thématiques dans sa chaîne de traitements en R. Il permet des représentations cartographiques tels que les cartes en symboles proportionnels, des cartes choroplèthes, des typologies, des cartes de flux ou des cartes de discontinuités. Il offre également des fonctions qui permettent d’améliorer la réalisation de la carte, comme des palettes de couleur, des éléments d’habillage (échelle, flèche du nord, titre, légende…), d’y rattacher des labels ou d’accéder à des APIs cartographiques.</p>
<p>Pour utiliser aisément ce package, plusieurs sources d’intérêts peuvent être consultées :</p>
<ul>
<li>La documentation du package qui documente toutes les fonctions du package, accessible directement dans R Studio. Pour cela, vous pouvez taper simplement :</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?cartography</code></pre></div>
<ul>
<li><p>La <a href="http://riatelab.github.io/cartography/vignettes/cheatsheet/cartography_cheatsheet.pdf" target="_blank">cheat sheet</a> de cartography, qui résume les principales fonctions du package de façon synthétique. <a href="http://riatelab.github.io/cartography/vignettes/cheatsheet/cartography_cheatsheet.pdf"><img src="img/cheat_sheet.png" alt="cartography cheat sheet" /></a></p></li>
<li><p>La vignette associée au package, qui présente des réalisations issues de ce package, elle aussi accessible directement dans R.</p></li>
<li><p>Le blog <a href="https://rgeomatic.hypotheses.org/" target="_blank">R Géomatique</a>, maintenu par l’auteur de <em>cartography</em> qui met à disposition ressources et exemples d’intérêt liés au package et à la représentation d’information spatiale sous R.</p></li>
</ul>
<div id="symboles-proportionnels" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Symboles proportionnels</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(cartography)
<span class="kw">library</span>(sf)
<span class="co"># Import des données</span>
mtq &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="kw">system.file</span>(<span class="st">&quot;shape/martinique.shp&quot;</span>, <span class="dt">package=</span><span class="st">&quot;cartography&quot;</span>))
<span class="co"># Communes</span>
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq), <span class="dt">col =</span> <span class="st">&quot;lightblue4&quot;</span>, <span class="dt">border =</span> <span class="st">&quot;lightblue3&quot;</span>, 
     <span class="dt">bg =</span> <span class="st">&quot;lightblue1&quot;</span>)
<span class="co"># Symboles proportionnels</span>
<span class="kw">propSymbolsLayer</span>(<span class="dt">x =</span> mtq, <span class="dt">var =</span> <span class="st">&quot;P13_POP&quot;</span>, 
                 <span class="dt">legend.title.txt =</span> <span class="st">&quot;Total</span><span class="ch">\n</span><span class="st">population (2013)&quot;</span>)
<span class="co"># Titre</span>
<span class="kw">title</span>(<span class="dt">main =</span> <span class="st">&quot;Population en Martinique&quot;</span>)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/propS-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="carte-choroplethe" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Carte choroplèthe</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtq<span class="op">$</span>cagr &lt;-<span class="st"> </span>(((mtq<span class="op">$</span>P13_POP <span class="op">/</span><span class="st"> </span>mtq<span class="op">$</span>P08_POP)<span class="op">^</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">4</span>)) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>
<span class="kw">choroLayer</span>(<span class="dt">x =</span> mtq, <span class="dt">var =</span> <span class="st">&quot;cagr&quot;</span>, <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">6.14</span>,<span class="op">-</span><span class="dv">2</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>),
           <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;#135D89&quot;</span>, <span class="st">&quot;#4D95BA&quot;</span>, <span class="st">&quot;#96D1EA&quot;</span>, <span class="st">&quot;#FCDACA&quot;</span>, <span class="st">&quot;#EC4E49&quot;</span>),
           <span class="dt">legend.title.txt =</span> <span class="st">&quot;Compound annual</span><span class="ch">\n</span><span class="st">growth rate&quot;</span>)
<span class="kw">title</span>(<span class="dt">main =</span> <span class="st">&quot;Evolution de la population&quot;</span>)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/choro-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="palettes-de-couleurs" class="section level2">
<h2><span class="header-section-number">2.2</span> Palettes de couleurs</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">display.carto.all</span>(<span class="dv">20</span>)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/pal-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">display.carto.pal</span>(<span class="st">&quot;orange.pal&quot;</span>)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/pal1-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mypal &lt;-<span class="st"> </span><span class="kw">carto.pal</span>(<span class="dt">pal1 =</span> <span class="st">&quot;wine.pal&quot;</span>, <span class="dt">n1 =</span> <span class="dv">7</span>, <span class="dt">pal2 =</span> <span class="st">&quot;green.pal&quot;</span>, <span class="dt">n2 =</span> <span class="dv">12</span>,
                   <span class="dt">middle =</span> <span class="ot">TRUE</span>, <span class="dt">transparency =</span> <span class="ot">TRUE</span>)
k &lt;-<span class="st"> </span><span class="kw">length</span>(mypal)
<span class="kw">image</span>(<span class="dv">1</span><span class="op">:</span>k, <span class="dv">1</span>, <span class="kw">as.matrix</span>(<span class="dv">1</span><span class="op">:</span>k), <span class="dt">col=</span>mypal, <span class="dt">xlab =</span> <span class="kw">paste</span>(k,<span class="st">&quot; classes&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>),
      <span class="dt">ylab =</span> <span class="st">&quot;&quot;</span>, <span class="dt">xaxt =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">yaxt =</span> <span class="st">&quot;n&quot;</span>,<span class="dt">bty =</span> <span class="st">&quot;n&quot;</span>)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/pal2-1.png" width="672" /></p>
</div>
<div id="discretisations" class="section level2">
<h2><span class="header-section-number">2.3</span> Discrétisations</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">var &lt;-<span class="st"> </span>mtq<span class="op">$</span>cagr
moy &lt;-<span class="st"> </span><span class="kw">mean</span>(var)
med &lt;-<span class="st"> </span><span class="kw">median</span>(var)
std &lt;-<span class="st"> </span><span class="kw">sd</span>(var)
<span class="co"># Quantile intervals</span>
breaks &lt;-<span class="st"> </span><span class="kw">getBreaks</span>(<span class="dt">v =</span> var, <span class="dt">nclass =</span> <span class="dv">6</span>, <span class="dt">method =</span> <span class="st">&quot;quantile&quot;</span>)
<span class="kw">hist</span>(var, <span class="dt">probability =</span> <span class="ot">TRUE</span>, <span class="dt">breaks =</span> breaks, <span class="dt">main=</span><span class="st">&quot;quantiles&quot;</span>,
     <span class="dt">col =</span> <span class="kw">carto.pal</span>(<span class="dt">pal1 =</span> <span class="st">&quot;wine.pal&quot;</span>,<span class="dv">3</span>, <span class="st">&quot;green.pal&quot;</span>, <span class="dv">3</span>))
<span class="kw">rug</span>(var)
<span class="kw">abline</span>(<span class="dt">v =</span> med, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/disc2-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Mean and standard deviation (msd)</span>
breaks &lt;-<span class="st"> </span><span class="kw">getBreaks</span>(<span class="dt">v =</span> var, <span class="dt">method =</span> <span class="st">&quot;msd&quot;</span>, <span class="dt">k =</span> <span class="dv">1</span>, <span class="dt">middle =</span> <span class="ot">TRUE</span>)
<span class="kw">hist</span>(var, <span class="dt">probability =</span> <span class="ot">TRUE</span>, <span class="dt">breaks =</span> breaks, <span class="dt">main=</span><span class="st">&quot;moyenne / écart-type&quot;</span>,
     <span class="dt">col =</span> <span class="kw">carto.pal</span>(<span class="dt">pal1 =</span> <span class="st">&quot;wine.pal&quot;</span>,<span class="dv">3</span> , <span class="st">&quot;green.pal&quot;</span>, <span class="dv">2</span>, <span class="dt">middle =</span> <span class="ot">TRUE</span>))
<span class="kw">rug</span>(var)
<span class="kw">abline</span>(<span class="dt">v =</span> moy, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)
<span class="kw">abline</span>(<span class="dt">v =</span> moy <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">*</span><span class="st"> </span>std, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)
<span class="kw">abline</span>(<span class="dt">v =</span> moy <span class="op">-</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">*</span><span class="st"> </span>std, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/disc3-1.png" width="672" /></p>
</div>
<div id="combinaisons" class="section level2">
<h2><span class="header-section-number">2.4</span> Combinaisons</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq), <span class="dt">col =</span> <span class="st">&quot;lightblue4&quot;</span>,
     <span class="dt">border =</span> <span class="st">&quot;lightblue3&quot;</span>, <span class="dt">bg =</span> <span class="st">&quot;lightblue1&quot;</span>)
<span class="kw">propSymbolsChoroLayer</span>(<span class="dt">x =</span> mtq, <span class="dt">var=</span> <span class="st">&quot;P13_POP&quot;</span>,
                 <span class="dt">legend.var.title.txt =</span> <span class="st">&quot;Total</span><span class="ch">\n</span><span class="st">population (2013)&quot;</span>,
           <span class="dt">var2 =</span> <span class="st">&quot;cagr&quot;</span>, <span class="dt">legend.var.pos =</span> <span class="st">&quot;bottomleft&quot;</span>,
           <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">6.14</span>,<span class="op">-</span><span class="dv">2</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>),
           <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;#135D89&quot;</span>, <span class="st">&quot;#4D95BA&quot;</span>, <span class="st">&quot;#96D1EA&quot;</span>, <span class="st">&quot;#FCDACA&quot;</span>, <span class="st">&quot;#EC4E49&quot;</span>),
           <span class="dt">legend.var2.title.txt =</span> <span class="st">&quot;Compound annual</span><span class="ch">\n</span><span class="st">growth rate&quot;</span>)
<span class="co"># Title</span>
<span class="kw">title</span>(<span class="dt">main =</span> <span class="st">&quot;Evolution de la population&quot;</span>)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/choroprop-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="labels" class="section level2">
<h2><span class="header-section-number">2.5</span> Labels</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq), <span class="dt">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, <span class="dt">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>,
     <span class="dt">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>)
<span class="kw">labelLayer</span>(<span class="dt">x =</span> mtq, <span class="dt">txt =</span> <span class="st">&quot;LIBGEO&quot;</span>, <span class="dt">col=</span> <span class="st">&quot;black&quot;</span>, <span class="dt">cex =</span> <span class="fl">0.7</span>, <span class="dt">font =</span> <span class="dv">4</span>,
           <span class="dt">halo =</span> <span class="ot">TRUE</span>, <span class="dt">bg =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">r =</span> <span class="fl">0.1</span>, <span class="dt">overlap =</span> <span class="ot">FALSE</span>, 
           <span class="dt">show.lines =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/labs-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="les-donnees-osm" class="section level2">
<h2><span class="header-section-number">2.6</span> Les données OSM</h2>
<p><a href="https://www.openstreetmap.org" target="_blank">OpenStreetMap (OSM)</a> est un projet de cartographie participative qui a pour but de constituer une base de données géographiques libre à l’échelle mondiale. OpenStreetMap vous permet de voir, modifier et utiliser des données géographiques dans le Monde entier. En résumé, c’est comme Google Maps, mais en mieux…</p>
<div id="donnees-vectorielles" class="section level3">
<h3><span class="header-section-number">2.6.1</span> Données vectorielles</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;osmdata&quot;</span>)

## Data (c) OpenStreetMap contributors, ODbL 1.0. http://www.openstreetmap.org/copyright

prj &lt;-<span class="st"> </span><span class="kw">st_crs</span>(Paris)

bbox &lt;-<span class="st"> </span><span class="kw">st_bbox</span>(<span class="kw">st_transform</span>(Paris,<span class="dv">4326</span>))

q &lt;-<span class="st"> </span><span class="kw">opq</span>(<span class="dt">bbox =</span> bbox , <span class="dt">timeout =</span> <span class="dv">2000</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add_osm_feature</span>(<span class="dt">key =</span> <span class="st">&#39;man_made&#39;</span>, <span class="dt">value =</span> <span class="st">&#39;surveillance&#39;</span>)
cameras &lt;-<span class="st"> </span><span class="kw">osmdata_sf</span>(q)<span class="op">$</span>osm_points
cameras &lt;-<span class="st"> </span><span class="kw">st_transform</span>(cameras, prj)

cameras<span class="op">$</span>ok &lt;-<span class="st"> </span><span class="kw">st_intersects</span>(<span class="kw">st_geometry</span>(cameras), <span class="kw">st_geometry</span>(Paris), <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
cameras &lt;-<span class="st"> </span>cameras[cameras<span class="op">$</span>ok <span class="op">==</span><span class="st"> </span>T,]

Paname &lt;-<span class="st"> </span><span class="kw">getTiles</span>(<span class="dt">x =</span> Paris, <span class="dt">type =</span><span class="st">&quot;cartodark&quot;</span>, <span class="dt">crop =</span> <span class="ot">TRUE</span>)
<span class="kw">tilesLayer</span>(Paname)
<span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">1.5</span>,<span class="fl">0.5</span>))
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(Paris), <span class="dt">lwd=</span><span class="dv">1</span>, <span class="dt">border=</span><span class="st">&quot;white&quot;</span>, <span class="dt">lty=</span><span class="dv">2</span>, <span class="dt">add=</span>T)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(cameras), <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, <span class="dt">add=</span>T)</code></pre></div>
</div>
<div id="donnees-raster" class="section level3">
<h3><span class="header-section-number">2.6.2</span> Données raster</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tiles &lt;-<span class="st"> </span><span class="kw">getTiles</span>(<span class="dt">x =</span> mtq, <span class="dt">type =</span> <span class="st">&quot;osm&quot;</span>, <span class="dt">crop=</span>T, <span class="dt">zoom =</span> <span class="dv">11</span>)
<span class="kw">tilesLayer</span>(tiles)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq), <span class="dt">add=</span>T)</code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/osm-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="cartographie-interactive" class="section level2">
<h2><span class="header-section-number">2.7</span> Cartographie interactive</h2>
<p>leaflet / mapview</p>
</div>
<div id="geocodage-dadresses" class="section level2">
<h2><span class="header-section-number">2.8</span> Géocodage d’adresses</h2>
</div>
<div id="creation-de-cartons" class="section level2">
<h2><span class="header-section-number">2.9</span> Création de cartons</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="jour1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="jour3.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["Cartographie_avec_R.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

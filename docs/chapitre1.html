<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapitre 1 Les données spatiales | Cartographie avec R</title>
  <meta name="description" content="Matériel pour le cours de cartographie avec R">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapitre 1 Les données spatiales | Cartographie avec R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Matériel pour le cours de cartographie avec R" />
  <meta name="github-repo" content="rCarto/carto_avec_r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 1 Les données spatiales | Cartographie avec R" />
  
  <meta name="twitter:description" content="Matériel pour le cours de cartographie avec R" />
  

<meta name="author" content="banner Timothée Giraud &amp; Hugues Pécout">


<meta name="date" content="2019-01-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="chapitre2.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<script src="libs/leaflet-providers-1.1.17/leaflet-providers.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.2/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<link href="libs/PopupTable-0.0.1/popup.css" rel="stylesheet" />


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Cartographie avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="chapitre1.html"><a href="chapitre1.html"><i class="fa fa-check"></i><b>1</b> Les données spatiales</a><ul>
<li class="chapter" data-level="1.1" data-path="chapitre1.html"><a href="chapitre1.html#le-package-sf"><i class="fa fa-check"></i><b>1.1</b> Le package <code>sf</code></a><ul>
<li class="chapter" data-level="1.1.1" data-path="chapitre1.html"><a href="chapitre1.html#format-des-objets-spatiaux-sf"><i class="fa fa-check"></i><b>1.1.1</b> Format des objets spatiaux <code>sf</code></a></li>
<li class="chapter" data-level="1.1.2" data-path="chapitre1.html"><a href="chapitre1.html#construction-dun-objet-sf"><i class="fa fa-check"></i><b>1.1.2</b> Construction d’un objet sf</a></li>
<li class="chapter" data-level="1.1.3" data-path="chapitre1.html"><a href="chapitre1.html#import-export"><i class="fa fa-check"></i><b>1.1.3</b> Import / Export</a></li>
<li class="chapter" data-level="1.1.4" data-path="chapitre1.html"><a href="chapitre1.html#affichage-de-donnees"><i class="fa fa-check"></i><b>1.1.4</b> Affichage de données</a></li>
<li class="chapter" data-level="1.1.5" data-path="chapitre1.html"><a href="chapitre1.html#joindre-des-donnees"><i class="fa fa-check"></i><b>1.1.5</b> Joindre des données</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="chapitre1.html"><a href="chapitre1.html#les-systemes-de-projections"><i class="fa fa-check"></i><b>1.2</b> Les systèmes de projections</a><ul>
<li class="chapter" data-level="1.2.1" data-path="chapitre1.html"><a href="chapitre1.html#consulter-la-projection-dun-objet"><i class="fa fa-check"></i><b>1.2.1</b> Consulter la projection d’un objet</a></li>
<li class="chapter" data-level="1.2.2" data-path="chapitre1.html"><a href="chapitre1.html#modifier-la-projection-dun-objet"><i class="fa fa-check"></i><b>1.2.2</b> Modifier la projection d’un objet</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="chapitre1.html"><a href="chapitre1.html#operations-de-geotraitement"><i class="fa fa-check"></i><b>1.3</b> Opérations de géotraitement</a><ul>
<li class="chapter" data-level="1.3.1" data-path="chapitre1.html"><a href="chapitre1.html#selection-par-attributs"><i class="fa fa-check"></i><b>1.3.1</b> Sélection par attributs</a></li>
<li class="chapter" data-level="1.3.2" data-path="chapitre1.html"><a href="chapitre1.html#selection-spatiale"><i class="fa fa-check"></i><b>1.3.2</b> Sélection spatiale</a></li>
<li class="chapter" data-level="1.3.3" data-path="chapitre1.html"><a href="chapitre1.html#extraire-des-centroides"><i class="fa fa-check"></i><b>1.3.3</b> Extraire des centroides</a></li>
<li class="chapter" data-level="1.3.4" data-path="chapitre1.html"><a href="chapitre1.html#creer-une-matrice-de-distances"><i class="fa fa-check"></i><b>1.3.4</b> Créer une matrice de distances</a></li>
<li class="chapter" data-level="1.3.5" data-path="chapitre1.html"><a href="chapitre1.html#agreger-des-polygones"><i class="fa fa-check"></i><b>1.3.5</b> Agréger des polygones</a></li>
<li class="chapter" data-level="1.3.6" data-path="chapitre1.html"><a href="chapitre1.html#agreger-des-polygones-en-fonction-dune-variable"><i class="fa fa-check"></i><b>1.3.6</b> Agréger des polygones en fonction d’une variable</a></li>
<li class="chapter" data-level="1.3.7" data-path="chapitre1.html"><a href="chapitre1.html#construire-une-zone-tampon"><i class="fa fa-check"></i><b>1.3.7</b> Construire une zone tampon</a></li>
<li class="chapter" data-level="1.3.8" data-path="chapitre1.html"><a href="chapitre1.html#realiser-une-intersection"><i class="fa fa-check"></i><b>1.3.8</b> Réaliser une intersection</a></li>
<li class="chapter" data-level="1.3.9" data-path="chapitre1.html"><a href="chapitre1.html#compter-des-points-dans-un-polygone"><i class="fa fa-check"></i><b>1.3.9</b> Compter des points dans un polygone</a></li>
<li class="chapter" data-level="1.3.10" data-path="chapitre1.html"><a href="chapitre1.html#construire-des-polygones-de-voronoi"><i class="fa fa-check"></i><b>1.3.10</b> Construire des polygones de Voronoi</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="chapitre1.html"><a href="chapitre1.html#geocodage-dadresses"><i class="fa fa-check"></i><b>1.4</b> Géocodage d’adresses</a></li>
<li class="chapter" data-level="1.5" data-path="chapitre1.html"><a href="chapitre1.html#importer-des-donnees-osm"><i class="fa fa-check"></i><b>1.5</b> Importer des données OSM</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapitre2.html"><a href="chapitre2.html"><i class="fa fa-check"></i><b>2</b> Cartographie thématique</a><ul>
<li class="chapter" data-level="2.1" data-path="chapitre2.html"><a href="chapitre2.html#le-package-cartography"><i class="fa fa-check"></i><b>2.1</b> Le package <code>cartography</code></a></li>
<li class="chapter" data-level="2.2" data-path="chapitre2.html"><a href="chapitre2.html#representations-usuelles"><i class="fa fa-check"></i><b>2.2</b> Représentations usuelles</a><ul>
<li class="chapter" data-level="2.2.1" data-path="chapitre2.html"><a href="chapitre2.html#carte-de-symboles-proportionnels"><i class="fa fa-check"></i><b>2.2.1</b> Carte de symboles proportionnels</a></li>
<li class="chapter" data-level="2.2.2" data-path="chapitre2.html"><a href="chapitre2.html#carte-choroplethe"><i class="fa fa-check"></i><b>2.2.2</b> Carte choroplèthe</a></li>
<li class="chapter" data-level="2.2.3" data-path="chapitre2.html"><a href="chapitre2.html#carte-de-typologie"><i class="fa fa-check"></i><b>2.2.3</b> Carte de typologie</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chapitre2.html"><a href="chapitre2.html#combinaisons-de-representations"><i class="fa fa-check"></i><b>2.3</b> Combinaisons de représentations</a><ul>
<li class="chapter" data-level="2.3.1" data-path="chapitre2.html"><a href="chapitre2.html#carte-de-stocks-et-de-ratios"><i class="fa fa-check"></i><b>2.3.1</b> Carte de stocks et de ratios</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapitre2.html"><a href="chapitre2.html#carte-de-stocks-et-de-qualitative"><i class="fa fa-check"></i><b>2.3.2</b> Carte de stocks et de qualitative</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chapitre2.html"><a href="chapitre2.html#elements-dhabillage"><i class="fa fa-check"></i><b>2.4</b> Éléments d’habillage</a><ul>
<li class="chapter" data-level="2.4.1" data-path="chapitre2.html"><a href="chapitre2.html#habillage-complet"><i class="fa fa-check"></i><b>2.4.1</b> Habillage complet</a></li>
<li class="chapter" data-level="2.4.2" data-path="chapitre2.html"><a href="chapitre2.html#fleche-dorientation"><i class="fa fa-check"></i><b>2.4.2</b> Flèche d’orientation</a></li>
<li class="chapter" data-level="2.4.3" data-path="chapitre2.html"><a href="chapitre2.html#echelle"><i class="fa fa-check"></i><b>2.4.3</b> Échelle</a></li>
<li class="chapter" data-level="2.4.4" data-path="chapitre2.html"><a href="chapitre2.html#etiquettes"><i class="fa fa-check"></i><b>2.4.4</b> Étiquettes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="chapitre2.html"><a href="chapitre2.html#autres-fonctionnalites-utiles"><i class="fa fa-check"></i><b>2.5</b> Autres fonctionnalités utiles</a><ul>
<li class="chapter" data-level="2.5.1" data-path="chapitre2.html"><a href="chapitre2.html#utiliser-un-fond-de-carte-osm"><i class="fa fa-check"></i><b>2.5.1</b> Utiliser un fond de carte OSM</a></li>
<li class="chapter" data-level="2.5.2" data-path="chapitre2.html"><a href="chapitre2.html#mise-en-page"><i class="fa fa-check"></i><b>2.5.2</b> Mise en page</a></li>
<li class="chapter" data-level="2.5.3" data-path="chapitre2.html"><a href="chapitre2.html#creer-un-effet-crayonne"><i class="fa fa-check"></i><b>2.5.3</b> Créer un effet crayonné</a></li>
<li class="chapter" data-level="2.5.4" data-path="chapitre2.html"><a href="chapitre2.html#ajouter-un-ombrage-a-une-couche"><i class="fa fa-check"></i><b>2.5.4</b> Ajouter un ombrage à une couche</a></li>
<li class="chapter" data-level="2.5.5" data-path="chapitre2.html"><a href="chapitre2.html#creation-de-cartons"><i class="fa fa-check"></i><b>2.5.5</b> Création de cartons</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapitre3.html"><a href="chapitre3.html"><i class="fa fa-check"></i><b>3</b> Cartographie thématique avancée</a><ul>
<li class="chapter" data-level="3.1" data-path="chapitre3.html"><a href="chapitre3.html#les-cartes-de-discontinuites"><i class="fa fa-check"></i><b>3.1</b> Les cartes de discontinuités</a></li>
<li class="chapter" data-level="3.2" data-path="chapitre3.html"><a href="chapitre3.html#les-grilles-regulieres"><i class="fa fa-check"></i><b>3.2</b> Les grilles régulières</a></li>
<li class="chapter" data-level="3.3" data-path="chapitre3.html"><a href="chapitre3.html#le-lissage-spatial"><i class="fa fa-check"></i><b>3.3</b> Le lissage spatial</a></li>
<li class="chapter" data-level="3.4" data-path="chapitre3.html"><a href="chapitre3.html#cartes-en-3d"><i class="fa fa-check"></i><b>3.4</b> Cartes en 3D</a><ul>
<li class="chapter" data-level="3.4.1" data-path="chapitre3.html"><a href="chapitre3.html#linemap"><i class="fa fa-check"></i><b>3.4.1</b> linemap</a></li>
<li class="chapter" data-level="3.4.2" data-path="chapitre3.html"><a href="chapitre3.html#relief-tanaka"><i class="fa fa-check"></i><b>3.4.2</b> Relief Tanaka</a></li>
<li class="chapter" data-level="3.4.3" data-path="chapitre3.html"><a href="chapitre3.html#rayshader"><i class="fa fa-check"></i><b>3.4.3</b> Rayshader</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="chapitre3.html"><a href="chapitre3.html#les-cartogrammes"><i class="fa fa-check"></i><b>3.5</b> Les cartogrammes</a><ul>
<li class="chapter" data-level="3.5.1" data-path="chapitre3.html"><a href="chapitre3.html#les-cartogrammes-de-dorling"><i class="fa fa-check"></i><b>3.5.1</b> Les cartogrammes de Dorling</a></li>
<li class="chapter" data-level="3.5.2" data-path="chapitre3.html"><a href="chapitre3.html#les-cartogrammes-non-continus"><i class="fa fa-check"></i><b>3.5.2</b> Les cartogrammes non continus</a></li>
<li class="chapter" data-level="3.5.3" data-path="chapitre3.html"><a href="chapitre3.html#les-cartogrammes-continus"><i class="fa fa-check"></i><b>3.5.3</b> Les cartogrammes continus</a></li>
<li class="chapter" data-level="3.5.4" data-path="chapitre3.html"><a href="chapitre3.html#forces-et-faiblesses-des-cartogrammes"><i class="fa fa-check"></i><b>3.5.4</b> Forces et faiblesses des cartogrammes</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="chapitre3.html"><a href="chapitre3.html#cartographie-interactive"><i class="fa fa-check"></i><b>3.6</b> Cartographie interactive</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sessioninfo.html"><a href="sessioninfo.html"><i class="fa fa-check"></i><b>4</b> <code>sessionInfo()</code></a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rCarto/carto_avec_r" target="blank">Contribuer</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cartographie avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapitre1" class="section level1">
<h1><span class="header-section-number">Chapitre 1</span> Les données spatiales</h1>
<p>Il est possible d’importer, de manipuler, de traiter, d’afficher et d’exporter des données spatiales avec R. La grande majorité des opérations de géotraitement sont disponibles dans R grace au package <code>sf</code>. Il devient alors possible d’utiliser R comme un SIG.</p>
<div id="le-package-sf" class="section level2">
<h2><span class="header-section-number">1.1</span> Le package <code>sf</code></h2>
<p><strong>Historique</strong><br />
Historiquement, trois packages permettent d’importer, de manipuler et de transformer les données spatiales :</p>
<ul>
<li>Le package <code>rgdal</code> qui est une interface entre R et les librairies GDAL (<a href="http://www.gdal.org/" target="_blank">Geospatial Data Abstraction Library</a>) et <a href="https://github.com/OSGeo/proj.4" target="_blank">PROJ4</a> permet d’importer et d’exporter les données spatiales (les shapefiles par exemple) et aussi de gérer les projections cartographiques<br />
</li>
<li>Le package <code>sp</code> fournit des classes et methodes pour les données spatiales dans R. Il permet afficher des fond de cartes, d’inspecter une table attributaire etc.<br />
</li>
<li>Le package <code>rgeos</code> donne accès à la librairie d’opérations spatiales GEOS (<a href="http://trac.osgeo.org/geos/" target="_blank">Geometry Engine - Open Source</a>) et rend donc disponible les opérations SIG classiques : calcul de surface ou de périmètre, calcul de distances, aggrégations spatiales, zones tampons, intersections etc.</li>
</ul>
<p><strong>La suite</strong><br />
Le package <code>sf</code> (<span class="citation">(Pebesma <a href="#ref-R-sf">2018</a><a href="#ref-R-sf">a</a>)</span>, <span class="citation">(Pebesma <a href="#ref-Pebesma18">2018</a><a href="#ref-Pebesma18">b</a>)</span>) a été publié fin 2016 par Edzer Pebesma (auteur de <code>sp</code>). Son objectif est de combiner les fonctionnalités de <code>sp</code>, <code>rgeos</code> et <code>rgdal</code> dans un package unique plus ergonomique.
Ce package propose des objets plus simples (suivant le standard simple feature) dont la manipulation est plus aisée. Une attention particulière a été portée à la compatibilité du package avec la syntaxe <em>pipe</em> et les opérateurs du <code>tidyverse</code>.</p>
<p>Aujourd’hui, les principaux développements dans l’écosystème spatial de R se détachent progressivement des 3 anciens (<code>sp</code>, <code>rgdal</code>, <code>rgeos</code>) pour se reposer sur <code>sf</code>.</p>
<div id="format-des-objets-spatiaux-sf" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Format des objets spatiaux <code>sf</code></h3>
<p><img src="img/sf.png" width="562" style="display: block; margin: auto;" /></p>
<p>Les objets <code>sf</code> sont des <code>data.frame</code> dont l’une des colonnes contient des géométries. Cette colonne est de la classe sfc (simple feature column) et chaque individu de la colonne est un sfg (simple feature geometry).<br />
Ce format est très pratique dans la mesure ou les données et les géométries sont intrinsèquement liées dans un même objet.</p>
</div>
<div id="construction-dun-objet-sf" class="section level3">
<h3><span class="header-section-number">1.1.2</span> Construction d’un objet sf</h3>
<p><strong>Couche de points</strong></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sf)
pt1_sfg &lt;-<span class="st"> </span><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))
pt2_sfg &lt;-<span class="st"> </span><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>))
pt3_sfg &lt;-<span class="st"> </span><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))
(pt_sfc &lt;-<span class="st"> </span><span class="kw">st_sfc</span>(pt1_sfg,pt2_sfg,pt3_sfg, <span class="dt">crs =</span> (<span class="dv">4326</span>)))</code></pre>
<pre><code>Geometry set for 3 features 
geometry type:  POINT
dimension:      XY
bbox:           xmin: 1 ymin: 1 xmax: 3 ymax: 4
epsg (SRID):    4326
proj4string:    +proj=longlat +datum=WGS84 +no_defs</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">pt_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id=</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">cat =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>), 
                    <span class="dt">var1 =</span> <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>), <span class="dt">var2 =</span> <span class="kw">c</span>(<span class="fl">2.3</span>,<span class="fl">1.9</span>,<span class="dv">4</span>))
(pt_sf &lt;-<span class="st"> </span><span class="kw">st_sf</span>(pt_df,<span class="dt">geometry =</span> pt_sfc))</code></pre>
<pre><code>Simple feature collection with 3 features and 4 fields
geometry type:  POINT
dimension:      XY
bbox:           xmin: 1 ymin: 1 xmax: 3 ymax: 4
epsg (SRID):    4326
proj4string:    +proj=longlat +datum=WGS84 +no_defs
  id cat var1 var2    geometry
1  1   A   10  2.3 POINT (1 2)
2  2   B   20  1.9 POINT (3 4)
3  3   A   30  4.0 POINT (2 1)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(pt_sf)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-2-1.png" width="460.8" style="display: block; margin: auto;" /></p>
<p><strong>Couche de polygones</strong></p>
<pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))
p2 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">0</span>))
p3 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>))
pol1_sfg &lt;-<span class="kw">st_polygon</span>(<span class="kw">list</span>(p1))
pol2_sfg &lt;-<span class="kw">st_polygon</span>(<span class="kw">list</span>(p2))
pol3_sfg &lt;-<span class="kw">st_polygon</span>(<span class="kw">list</span>(p3))
(pol_sfc &lt;-<span class="st"> </span><span class="kw">st_sfc</span>(pol1_sfg, pol2_sfg, pol3_sfg, <span class="dt">crs =</span> <span class="dv">4326</span>))</code></pre>
<pre><code>Geometry set for 3 features 
geometry type:  POLYGON
dimension:      XY
bbox:           xmin: 0 ymin: 0 xmax: 4 ymax: 4
epsg (SRID):    4326
proj4string:    +proj=longlat +datum=WGS84 +no_defs</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">pol_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id=</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">cat =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>), 
                     <span class="dt">var1 =</span> <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>), <span class="dt">var2 =</span> <span class="kw">c</span>(<span class="fl">2.3</span>,<span class="fl">1.9</span>,<span class="dv">4</span>))
(pol_sf &lt;-<span class="st"> </span><span class="kw">st_sf</span>(pol_df,<span class="dt">geometry =</span> pol_sfc))</code></pre>
<pre><code>Simple feature collection with 3 features and 4 fields
geometry type:  POLYGON
dimension:      XY
bbox:           xmin: 0 ymin: 0 xmax: 4 ymax: 4
epsg (SRID):    4326
proj4string:    +proj=longlat +datum=WGS84 +no_defs
  id cat var1 var2                       geometry
1  1   A   10  2.3 POLYGON ((0 0, 1 0, 3 2, 2 ...
2  2   B   20  1.9 POLYGON ((3 0, 4 0, 4 1, 3 ...
3  3   A   30  4.0 POLYGON ((3 3, 4 2, 4 3, 3 3))</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(pol_sf)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-3-1.png" width="460.8" style="display: block; margin: auto;" /></p>
<p><strong>Couche de linestring</strong></p>
<pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>))
p2 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>))
p3 &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>))
ls1_sfg &lt;-<span class="kw">st_linestring</span>(p1)
ls2_sfg &lt;-<span class="kw">st_linestring</span>(p2)
ls3_sfg &lt;-<span class="kw">st_linestring</span>(p3)
(ls_sfc &lt;-<span class="st"> </span><span class="kw">st_sfc</span>(ls1_sfg, ls2_sfg, ls3_sfg, <span class="dt">crs =</span> <span class="dv">4326</span>))</code></pre>
<pre><code>Geometry set for 3 features 
geometry type:  LINESTRING
dimension:      XY
bbox:           xmin: 0 ymin: 0 xmax: 4 ymax: 4
epsg (SRID):    4326
proj4string:    +proj=longlat +datum=WGS84 +no_defs</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">ls_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id=</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">cat =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>), 
                    <span class="dt">var1 =</span> <span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>), <span class="dt">var2 =</span> <span class="kw">c</span>(<span class="fl">2.3</span>,<span class="fl">1.9</span>,<span class="dv">4</span>))
(ls_sf &lt;-<span class="st"> </span><span class="kw">st_sf</span>(ls_df,<span class="dt">geometry =</span> ls_sfc))</code></pre>
<pre><code>Simple feature collection with 3 features and 4 fields
geometry type:  LINESTRING
dimension:      XY
bbox:           xmin: 0 ymin: 0 xmax: 4 ymax: 4
epsg (SRID):    4326
proj4string:    +proj=longlat +datum=WGS84 +no_defs
  id cat var1 var2                       geometry
1  1   A   10  2.3 LINESTRING (0 0, 1 0, 3 2, ...
2  2   B   20  1.9 LINESTRING (3 0, 4 0, 4 1, ...
3  3   A   30  4.0     LINESTRING (3 3, 4 2, 4 3)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(ls_sf)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-4-1.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="import-export" class="section level3">
<h3><span class="header-section-number">1.1.3</span> Import / Export</h3>
<p>Les fonctions <code>st_read()</code> et <code>st_write()</code> permettent d’importer et d’exporter de nombreux types de fichiers.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sf)
mtq &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;data/martinique.shp&quot;</span>, <span class="dt">quiet=</span><span class="ot">TRUE</span>)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_write</span>(<span class="dt">obj =</span> mtq, <span class="dt">dsn =</span> <span class="st">&quot;data/mtq.gpkg&quot;</span>, <span class="dt">layer =</span> <span class="st">&quot;mtq&quot;</span>, <span class="dt">delete_layer =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>Deleting layer `mtq&#39; using driver `GPKG&#39;
Updating layer `mtq&#39; to data source `data/mtq.gpkg&#39; using driver `GPKG&#39;
features:       34
fields:         23
geometry type:  Polygon</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_write</span>(<span class="dt">obj =</span> mtq, <span class="st">&quot;data/mtq.shp&quot;</span>, <span class="dt">delete_layer =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>Deleting layer `mtq&#39; using driver `ESRI Shapefile&#39;
Writing layer `mtq&#39; to data source `data/mtq.shp&#39; using driver `ESRI Shapefile&#39;
features:       34
fields:         23
geometry type:  Polygon</code></pre>
</div>
<div id="affichage-de-donnees" class="section level3">
<h3><span class="header-section-number">1.1.4</span> Affichage de données</h3>
<p><strong>Aperçu des variables</strong> via les fonctions <code>head()</code> et <code>plot()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(mtq)</code></pre>
<pre><code>Simple feature collection with 6 features and 23 fields
geometry type:  POLYGON
dimension:      XY
bbox:           xmin: 695444.4 ymin: 1598817 xmax: 717731.2 ymax: 1645182
epsg (SRID):    32620
proj4string:    +proj=utm +zone=20 +datum=WGS84 +units=m +no_defs
  INSEE_COM         STATUT            LIBGEO P13_POP  C13_POP   C13_CS1   C13_CS2
1     97201 Commune simple L&#39;Ajoupa-Bouillon    1830 1481.801  9.780866  48.90433
2     97202 Commune simple Les Anses-d&#39;Arlet    3929 3190.115 97.433459 170.50855
3     97203 Commune simple      Basse-Pointe    3565 2983.215 39.510829  98.77707
     C13_CS3  C13_CS4  C13_CS5  C13_CS6  C13_CS7  C13_CS8 P08_POP  C08_POP  C08_CS1
1   9.780866 102.6991 273.8642 288.5355 430.3581 317.8781    1691 1346.519 31.40569
2 109.612642 239.5239 560.2424 385.6741 746.5743 880.5453    3826 3067.742 49.00453
3  43.461911 181.7498 568.9559 565.0048 940.5055 545.2494    3804 3054.108 44.51803
    C08_CS2  C08_CS3  C08_CS4  C08_CS5  C08_CS6  C08_CS7  C08_CS8
1  43.18282 11.77713 145.2513 223.7655 251.2455 380.7940 259.0969
2 143.95079 65.33937 216.3534 600.3054 459.4174 558.8020 974.5694
3 106.84327 27.70011 186.0292 448.1481 620.2845 881.5853 738.9993
                        geometry
1 POLYGON ((699261.2 1637681,...
2 POLYGON ((709840 1599026, 7...
3 POLYGON ((706092.8 1642964,...
 [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 3 rows ]</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(mtq)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-5-1.png" width="460.8" style="display: block; margin: auto;" /></p>
<p><strong>Affichage de la géométrie</strong> uniquement.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq))</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-6-1.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="joindre-des-donnees" class="section level3">
<h3><span class="header-section-number">1.1.5</span> Joindre des données</h3>
<p>On peut joindre un <code>data.frame</code> à un objet sf en utilisant la fonction <code>merge()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">mtq2016 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/mtq2016.csv&quot;</span>)
<span class="kw">head</span>(mtq2016)</code></pre>
<pre><code>     ID                NOM Population.totale
1 97201 L&#39; Ajoupa-Bouillon              1964
2 97202  Les Anses-d&#39;Arlet              3686
3 97203       Basse-Pointe              3238
4 97234      Bellefontaine              1760
5 97204          Le Carbet              3655
6 97205        Case-Pilote              4522</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">mtq &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="dt">x =</span> mtq, <span class="dt">y =</span> mtq2016, <span class="dt">by.x =</span> <span class="st">&quot;INSEE_COM&quot;</span>, <span class="dt">by.y =</span> <span class="st">&quot;ID&quot;</span>)
<span class="kw">head</span>(mtq)</code></pre>
<pre><code>Simple feature collection with 6 features and 25 fields
geometry type:  POLYGON
dimension:      XY
bbox:           xmin: 695444.4 ymin: 1598817 xmax: 717731.2 ymax: 1645182
epsg (SRID):    32620
proj4string:    +proj=utm +zone=20 +datum=WGS84 +units=m +no_defs
  INSEE_COM         STATUT            LIBGEO P13_POP  C13_POP   C13_CS1   C13_CS2
1     97201 Commune simple L&#39;Ajoupa-Bouillon    1830 1481.801  9.780866  48.90433
2     97202 Commune simple Les Anses-d&#39;Arlet    3929 3190.115 97.433459 170.50855
3     97203 Commune simple      Basse-Pointe    3565 2983.215 39.510829  98.77707
     C13_CS3  C13_CS4  C13_CS5  C13_CS6  C13_CS7  C13_CS8 P08_POP  C08_POP  C08_CS1
1   9.780866 102.6991 273.8642 288.5355 430.3581 317.8781    1691 1346.519 31.40569
2 109.612642 239.5239 560.2424 385.6741 746.5743 880.5453    3826 3067.742 49.00453
3  43.461911 181.7498 568.9559 565.0048 940.5055 545.2494    3804 3054.108 44.51803
    C08_CS2  C08_CS3  C08_CS4  C08_CS5  C08_CS6  C08_CS7  C08_CS8                NOM
1  43.18282 11.77713 145.2513 223.7655 251.2455 380.7940 259.0969 L&#39; Ajoupa-Bouillon
2 143.95079 65.33937 216.3534 600.3054 459.4174 558.8020 974.5694  Les Anses-d&#39;Arlet
3 106.84327 27.70011 186.0292 448.1481 620.2845 881.5853 738.9993       Basse-Pointe
  Population.totale                       geometry
1              1964 POLYGON ((699261.2 1637681,...
2              3686 POLYGON ((709840 1599026, 7...
3              3238 POLYGON ((706092.8 1642964,...
 [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 3 rows ]</code></pre>
</div>
</div>
<div id="les-systemes-de-projections" class="section level2">
<h2><span class="header-section-number">1.2</span> Les systèmes de projections</h2>
<div id="consulter-la-projection-dun-objet" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Consulter la projection d’un objet</h3>
<p>La fonction <code>st_crs()</code> permet de consulter le système de projection utilisé par un objet sf et de la modifier (<strong>sans reprojeter les données</strong>).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_crs</span>(mtq)</code></pre>
<pre><code>Coordinate Reference System:
  EPSG: 32620 
  proj4string: &quot;+proj=utm +zone=20 +datum=WGS84 +units=m +no_defs&quot;</code></pre>
</div>
<div id="modifier-la-projection-dun-objet" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Modifier la projection d’un objet</h3>
<p>La fonction <code>st_transform()</code> permet de reprojeter un objet sf.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq))
<span class="kw">title</span>(<span class="st">&quot;WGS 84 / UTM zone 20N&quot;</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/proj2-1.png" width="460.8" style="display: block; margin: auto;" /></p>
<pre class="sourceCode r"><code class="sourceCode r">mtq_reproj &lt;-<span class="st"> </span><span class="kw">st_transform</span>(mtq, <span class="dv">2154</span>)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq_reproj))
<span class="kw">title</span>(<span class="st">&quot;RGF93 / Lambert-93&quot;</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/proj2-2.png" width="460.8" style="display: block; margin: auto;" />
Le site <a href="http://spatialreference.org/" target="_blank">Spatial Reference</a> met à disposition les références de très nombreux systèmes de projection.</p>
</div>
</div>
<div id="operations-de-geotraitement" class="section level2">
<h2><span class="header-section-number">1.3</span> Opérations de géotraitement</h2>
<div id="selection-par-attributs" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Sélection par attributs</h3>
<p>Les objets <code>sf</code> <strong>sont</strong> des <code>data.frame</code>, on peut donc sélectionner leur lignes et leur colonnes de la même manière que les <code>data.frame</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># selection de ligne</span>
mtq[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ]</code></pre>
<pre><code>Simple feature collection with 2 features and 23 fields
geometry type:  POLYGON
dimension:      XY
bbox:           xmin: 697601.7 ymin: 1598817 xmax: 710461.9 ymax: 1640521
epsg (SRID):    32620
proj4string:    +proj=utm +zone=20 +datum=WGS84 +units=m +no_defs
  INSEE_COM         STATUT            LIBGEO P13_POP  C13_POP   C13_CS1   C13_CS2
1     97201 Commune simple L&#39;Ajoupa-Bouillon    1830 1481.801  9.780866  48.90433
2     97202 Commune simple Les Anses-d&#39;Arlet    3929 3190.115 97.433459 170.50855
     C13_CS3  C13_CS4  C13_CS5  C13_CS6  C13_CS7  C13_CS8 P08_POP  C08_POP  C08_CS1
1   9.780866 102.6991 273.8642 288.5355 430.3581 317.8781    1691 1346.519 31.40569
2 109.612642 239.5239 560.2424 385.6741 746.5743 880.5453    3826 3067.742 49.00453
    C08_CS2  C08_CS3  C08_CS4  C08_CS5  C08_CS6 C08_CS7  C08_CS8
1  43.18282 11.77713 145.2513 223.7655 251.2455 380.794 259.0969
2 143.95079 65.33937 216.3534 600.3054 459.4174 558.802 974.5694
                        geometry
1 POLYGON ((699261.2 1637681,...
2 POLYGON ((709840 1599026, 7...</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">mtq[mtq<span class="op">$</span>LIBGEO<span class="op">==</span><span class="st">&quot;Fort-de-France&quot;</span>, ]</code></pre>
<pre><code>Simple feature collection with 1 feature and 23 fields
geometry type:  POLYGON
dimension:      XY
bbox:           xmin: 704448.6 ymin: 1614283 xmax: 711650.9 ymax: 1626937
epsg (SRID):    32620
proj4string:    +proj=utm +zone=20 +datum=WGS84 +units=m +no_defs
  INSEE_COM               STATUT         LIBGEO P13_POP  C13_POP  C13_CS1  C13_CS2
9     97209 Préfecture de région Fort-de-France   84174 68712.33 86.57284 2720.489
   C13_CS3  C13_CS4  C13_CS5  C13_CS6  C13_CS7  C13_CS8 P08_POP  C08_POP  C08_CS1
9 4000.387 8407.424 13799.23 7309.136 16184.26 16204.84   89000 71566.82 119.0608
   C08_CS2  C08_CS3  C08_CS4 C08_CS5  C08_CS6  C08_CS7  C08_CS8
9 2480.105 3976.898 8630.605 15437.6 7964.513 15996.58 16961.46
                        geometry
9 POLYGON ((711183.1 1619627,...</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># selection de colonnes</span>
mtq[mtq<span class="op">$</span>LIBGEO<span class="op">==</span><span class="st">&quot;Fort-de-France&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]</code></pre>
<pre><code>Simple feature collection with 1 feature and 4 fields
geometry type:  POLYGON
dimension:      XY
bbox:           xmin: 704448.6 ymin: 1614283 xmax: 711650.9 ymax: 1626937
epsg (SRID):    32620
proj4string:    +proj=utm +zone=20 +datum=WGS84 +units=m +no_defs
  INSEE_COM               STATUT         LIBGEO P13_POP                       geometry
9     97209 Préfecture de région Fort-de-France   84174 POLYGON ((711183.1 1619627,...</code></pre>
</div>
<div id="selection-spatiale" class="section level3">
<h3><span class="header-section-number">1.3.2</span> Sélection spatiale</h3>
<p>Sélection des communes intesectant Fort-de-France</p>
<pre class="sourceCode r"><code class="sourceCode r">fdf &lt;-<span class="st">  </span>mtq[mtq<span class="op">$</span>LIBGEO <span class="op">==</span><span class="st"> &quot;Fort-de-France&quot;</span>, ]
mtq<span class="op">$</span>fdf &lt;-<span class="st"> </span><span class="kw">st_intersects</span>(<span class="dt">x =</span> mtq, <span class="dt">y =</span> fdf, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq))
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq[mtq<span class="op">$</span>fdf,]), <span class="dt">col =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/selectSpat-1.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="extraire-des-centroides" class="section level3">
<h3><span class="header-section-number">1.3.3</span> Extraire des centroides</h3>
<pre class="sourceCode r"><code class="sourceCode r">mtq_c &lt;-<span class="st"> </span><span class="kw">st_centroid</span>(mtq)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq))
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq_c), <span class="dt">add=</span><span class="ot">TRUE</span>, <span class="dt">cex=</span><span class="fl">1.2</span>, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, <span class="dt">pch=</span><span class="dv">20</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/centroid-1.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="creer-une-matrice-de-distances" class="section level3">
<h3><span class="header-section-number">1.3.4</span> Créer une matrice de distances</h3>
<p>Si le système de projection du jeu de données est renseigné les distances sont exprimées dans l’unité de mesure de la projection (en mètres le plus souvent).</p>
<pre class="sourceCode r"><code class="sourceCode r">mat &lt;-<span class="st"> </span><span class="kw">st_distance</span>(<span class="dt">x =</span> mtq_c, <span class="dt">y =</span> mtq_c)
mat[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</code></pre>
<pre><code>Units: [m]
          [,1]     [,2]      [,3]      [,4]      [,5]
[1,]     0.000 35297.56  3091.501 12131.617 17136.310
[2,] 35297.557     0.00 38332.602 25518.913 18605.249
[3,]  3091.501 38332.60     0.000 15094.702 20226.198
[4,] 12131.617 25518.91 15094.702     0.000  7177.011
[5,] 17136.310 18605.25 20226.198  7177.011     0.000</code></pre>
</div>
<div id="agreger-des-polygones" class="section level3">
<h3><span class="header-section-number">1.3.5</span> Agréger des polygones</h3>
<pre class="sourceCode r"><code class="sourceCode r">mtq_u &lt;-<span class="st"> </span><span class="kw">st_union</span>(mtq)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq), <span class="dt">col=</span><span class="st">&quot;lightblue&quot;</span>)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq_u), <span class="dt">add=</span>T, <span class="dt">lwd=</span><span class="dv">2</span>, <span class="dt">border =</span> <span class="st">&quot;red&quot;</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/aggreg-1.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="agreger-des-polygones-en-fonction-dune-variable" class="section level3">
<h3><span class="header-section-number">1.3.6</span> Agréger des polygones en fonction d’une variable</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
mtq_u2 &lt;-<span class="st"> </span>mtq <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(STATUT) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">P13_POP=</span><span class="kw">sum</span>(P13_POP))
<span class="kw">plot</span>(mtq_u2[<span class="st">&quot;STATUT&quot;</span>], <span class="dt">key.pos =</span> <span class="ot">NULL</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/aggreg2-1.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="construire-une-zone-tampon" class="section level3">
<h3><span class="header-section-number">1.3.7</span> Construire une zone tampon</h3>
<pre class="sourceCode r"><code class="sourceCode r">mtq_b &lt;-<span class="st"> </span><span class="kw">st_buffer</span>(<span class="dt">x =</span> mtq_u, <span class="dt">dist =</span> <span class="dv">2000</span>)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq), <span class="dt">col=</span><span class="st">&quot;lightblue&quot;</span>)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq_u), <span class="dt">add=</span>T, <span class="dt">lwd=</span><span class="dv">2</span>)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq_b), <span class="dt">add=</span>T, <span class="dt">lwd=</span><span class="dv">2</span>, <span class="dt">border =</span> <span class="st">&quot;red&quot;</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/buffers-1.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="realiser-une-intersection" class="section level3">
<h3><span class="header-section-number">1.3.8</span> Réaliser une intersection</h3>
<pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">700015</span>,<span class="dv">1624212</span>), <span class="kw">c</span>(<span class="dv">700015</span>,<span class="dv">1641586</span>), <span class="kw">c</span>(<span class="dv">719127</span>,<span class="dv">1641586</span>), 
           <span class="kw">c</span>(<span class="dv">719127</span>,<span class="dv">1624212</span>), <span class="kw">c</span>(<span class="dv">700015</span>,<span class="dv">1624212</span>))
p &lt;-<span class="st"> </span><span class="kw">st_sf</span>(<span class="kw">st_sfc</span>(<span class="kw">st_polygon</span>(<span class="kw">list</span>(m))), <span class="dt">crs =</span> <span class="kw">st_crs</span>(mtq))
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq))
<span class="kw">plot</span>(p, <span class="dt">border=</span><span class="st">&quot;red&quot;</span>, <span class="dt">lwd=</span><span class="dv">2</span>, <span class="dt">add=</span>T)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/intersect-1.png" width="460.8" style="display: block; margin: auto;" /></p>
<pre class="sourceCode r"><code class="sourceCode r">mtq_z &lt;-<span class="st"> </span><span class="kw">st_intersection</span>(<span class="dt">x =</span> mtq, <span class="dt">y =</span> p)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq))
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq_z), <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, <span class="dt">border=</span><span class="st">&quot;green&quot;</span>, <span class="dt">add=</span>T)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/intersect-2.png" width="460.8" style="display: block; margin: auto;" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq_z))</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/intersect-3.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="compter-des-points-dans-un-polygone" class="section level3">
<h3><span class="header-section-number">1.3.9</span> Compter des points dans un polygone</h3>
<pre class="sourceCode r"><code class="sourceCode r">pts &lt;-<span class="st"> </span><span class="kw">st_sample</span>(<span class="dt">x =</span> mtq, <span class="dt">size =</span> <span class="dv">50</span>)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq))
<span class="kw">plot</span>(pts, <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">add=</span><span class="ot">TRUE</span>, <span class="dt">cex =</span> <span class="dv">1</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/intersect2-1.png" width="460.8" style="display: block; margin: auto;" /></p>
<pre class="sourceCode r"><code class="sourceCode r">inter &lt;-<span class="st"> </span><span class="kw">st_intersects</span>(mtq, pts)
mtq<span class="op">$</span>nbpts &lt;-<span class="st"> </span><span class="kw">sapply</span>(<span class="dt">X =</span> inter, <span class="dt">FUN =</span> length)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq))
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq[mtq<span class="op">$</span>nbpts<span class="op">&gt;</span><span class="dv">2</span>,]), <span class="dt">col =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">add=</span><span class="ot">TRUE</span>)
<span class="kw">plot</span>(pts, <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">add=</span><span class="ot">TRUE</span>, <span class="dt">cex =</span> <span class="dv">1</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/intersect2-2.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="construire-des-polygones-de-voronoi" class="section level3">
<h3><span class="header-section-number">1.3.10</span> Construire des polygones de Voronoi</h3>
<p>google: “st_voronoi R sf” (<a href="https://github.com/r-spatial/sf/issues/474" class="uri">https://github.com/r-spatial/sf/issues/474</a> &amp; <a href="https://stackoverflow.com/questions/45719790/create-voronoi-polygon-with-simple-feature-in-r" class="uri">https://stackoverflow.com/questions/45719790/create-voronoi-polygon-with-simple-feature-in-r</a>)</p>
<pre class="sourceCode r"><code class="sourceCode r">mtq_v &lt;-<span class="st"> </span><span class="kw">st_voronoi</span>(<span class="dt">x =</span> <span class="kw">st_union</span>(mtq_c))
mtq_v &lt;-<span class="st"> </span><span class="kw">st_intersection</span>(<span class="kw">st_cast</span>(mtq_v), <span class="kw">st_union</span>(mtq))
mtq_v &lt;-<span class="st"> </span><span class="kw">st_join</span>(<span class="dt">x =</span> <span class="kw">st_sf</span>(mtq_v), <span class="dt">y =</span> mtq_c, <span class="dt">join=</span>st_intersects)
mtq_v &lt;-<span class="st"> </span><span class="kw">st_cast</span>(mtq_v, <span class="st">&quot;MULTIPOLYGON&quot;</span>)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq_v), <span class="dt">col=</span><span class="st">&#39;lightblue&#39;</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/voronoi-1.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="geocodage-dadresses" class="section level2">
<h2><span class="header-section-number">1.4</span> Géocodage d’adresses</h2>
<p>Plusieurs packages permettent de géocoder des adresses.</p>
<ul>
<li><code>photon</code> <span class="citation">(Giraud <a href="#ref-R-photon">2017</a><a href="#ref-R-photon">b</a>)</span></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># remotes::install_github(repo = &#39;rCarto/photon&#39;)  </span>
<span class="kw">library</span>(photon)
address &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;19 rue Michel Bakounine, 29600 Morlaix, France&quot;</span>,
             <span class="st">&quot;8 place Paul Ricoeur, 75013 Paris&quot;</span>)
place &lt;-<span class="st"> </span>photon<span class="op">::</span><span class="kw">geocode</span>(address, <span class="dt">limit =</span> <span class="dv">1</span>, <span class="dt">key =</span> <span class="st">&quot;place&quot;</span>, <span class="dt">lang =</span> <span class="st">&quot;fr&quot;</span>)
place</code></pre>
<pre><code>                                        location     osm_id osm_type name housenumber
1 19 rue Michel Bakounine, 29600 Morlaix, France 3241060871        N &lt;NA&gt;          19
2              8 place Paul Ricoeur, 75013 Paris 2608793979        N &lt;NA&gt;           8
                street postcode    city         state country osm_key osm_value       lon
1 Rue Michel Bakounine    29600 Morlaix      Bretagne  France   place     house -3.816435
2   Place Paul Ricoeur    75013   Paris Île-de-France  France   place     house  2.382483
       lat  msg
1 48.59041 &lt;NA&gt;
2 48.82670 &lt;NA&gt;</code></pre>
<ul>
<li><code>nominatim</code> <span class="citation">(Rudis <a href="#ref-R-nominatim">2019</a>)</span></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># remotes::install_github(&quot;hrbrmstr/nominatim&quot;)</span>
<span class="kw">library</span>(nominatim)
address &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">URLencode</span>(<span class="st">&quot;19 rue Michel Bakounine, 29600 Morlaix, France&quot;</span>),
             <span class="kw">URLencode</span>(<span class="st">&quot;8 place Paul Ricoeur, 75013 Paris&quot;</span>))
place &lt;-<span class="st"> </span><span class="kw">osm_geocode</span>(address, 
                     <span class="dt">country_codes =</span> <span class="st">&quot;FR&quot;</span>, 
                     <span class="dt">key =</span> <span class="st">&quot;UneClefMapQuestValide&quot;</span>)
place</code></pre>
<pre><code>  place_id
1 44644129
2 27209988
                                                                               licence
1 Data © OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright
2 Data © OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright
  osm_type     osm_id      lat       lon
1     node 3241060871 48.59041 -3.816435
2     node 2608793979 48.82670  2.382483
                                                                                                   display_name
1 19, Rue Michel Bakounine, Ploujean, Kerozar, Morlaix, Finistère, Brittany, Metropolitan France, 29600, France
2    8, Place Paul Ricoeur, Gare, 13th Arrondissement, Paris, Ile-de-France, Metropolitan France, 75013, France
  class  type importance bbox_left bbox_top bbox_right bbox_bottom
1 place house      0.741  48.59036 48.59046  -3.816485   -3.816384
2 place house      0.631  48.82665 48.82675   2.382433    2.382533</code></pre>
<ul>
<li><code>banR</code> <span class="citation">(Gombin and Chevalier <a href="#ref-R-banR">2017</a>)</span>, pour des adresses en France uniquement.</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(banR)
address &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;19 rue Michel Bakounine, 29600 Morlaix, France&quot;</span>,
             <span class="st">&quot;8 place Paul Ricoeur, 75013 Paris&quot;</span>)
place &lt;-<span class="st"> </span><span class="kw">geocode_tbl</span>(<span class="dt">tbl =</span> <span class="kw">data.frame</span>(address), <span class="dt">adresse =</span> <span class="st">&quot;address&quot;</span>)
place</code></pre>
<pre><code># A tibble: 2 x 14
  address latitude longitude result_label result_score result_type result_id
  &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;    
1 19 rue…     48.6     -3.82 19 Rue Mich…         0.78 housenumber ADRNIVX_…
2 8 plac…     48.8      2.38 8 Place Pau…         0.93 housenumber ADRNIVX_…
# … with 7 more variables: result_housenumber &lt;int&gt;, result_name &lt;chr&gt;,
#   result_street &lt;chr&gt;, result_postcode &lt;int&gt;, result_city &lt;chr&gt;, result_context &lt;chr&gt;,
#   result_citycode &lt;chr&gt;</code></pre>
<p><strong>Transformer les données en objet <code>sf</code></strong></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sf)
<span class="kw">library</span>(cartography)
place_sf &lt;-<span class="st"> </span><span class="kw">st_as_sf</span>(place, <span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>), <span class="dt">crs =</span> <span class="dv">4326</span>)
osm_fr &lt;-<span class="st"> </span><span class="kw">getTiles</span>(<span class="dt">x =</span> place_sf, <span class="dt">zoom =</span> <span class="dv">7</span> )
<span class="kw">tilesLayer</span>(osm_fr)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(place_sf), <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">cex =</span> <span class="dv">4</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">add=</span>T)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/adddisplay-1.png" width="460.8" style="display: block; margin: auto;" /></p>
</div>
<div id="importer-des-donnees-osm" class="section level2">
<h2><span class="header-section-number">1.5</span> Importer des données OSM</h2>
<p><a href="https://www.openstreetmap.org" target="_blank">OpenStreetMap (OSM)</a> est un projet de cartographie participative qui a pour but de constituer une base de données géographiques libre à l’échelle mondiale. OpenStreetMap vous permet de voir, modifier et utiliser des données géographiques dans le Monde entier.</p>
<p>Le package <code>osmdata</code> <span class="citation">(Padgham et al. <a href="#ref-R-osmdata">2017</a>)</span> permet d’extraire des données vectorielles depuis OSM.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sf)
<span class="kw">library</span>(osmdata)
mtq &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;data/martinique.shp&quot;</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)
<span class="co"># Définition d&#39;une bounding box</span>
q &lt;-<span class="st"> </span><span class="kw">opq</span>(<span class="dt">bbox=</span><span class="kw">st_bbox</span>(<span class="kw">st_transform</span>(mtq,<span class="dv">4326</span>)))
<span class="co"># Extraction des resaturants</span>
res &lt;-<span class="st"> </span><span class="kw">add_osm_feature</span>(<span class="dt">opq =</span> q, <span class="dt">key =</span> <span class="st">&#39;amenity&#39;</span>, <span class="dt">value =</span> <span class="st">&quot;restaurant&quot;</span>)
res.sf &lt;-<span class="st"> </span><span class="kw">osmdata_sf</span>(res)
res.sf.pts  &lt;-<span class="st"> </span>res.sf<span class="op">$</span>osm_points[<span class="op">!</span><span class="kw">is.na</span>(res.sf<span class="op">$</span>osm_points<span class="op">$</span>amenity),]
res.sf.pol &lt;-<span class="st"> </span>res.sf<span class="op">$</span>osm_polygons
<span class="kw">st_geometry</span>(res.sf.pol) &lt;-<span class="st"> </span><span class="kw">st_centroid</span>(<span class="kw">st_geometry</span>(res.sf.pol))
<span class="co"># Extraction des fast food</span>
ff &lt;-<span class="st"> </span><span class="kw">add_osm_feature</span>(<span class="dt">opq =</span> q, <span class="dt">key =</span> <span class="st">&#39;amenity&#39;</span>,<span class="dt">value =</span> <span class="st">&quot;fast_food&quot;</span>)
ff.sf &lt;-<span class="st"> </span><span class="kw">osmdata_sf</span>(ff)
ff.sf.pts  &lt;-<span class="st"> </span>ff.sf<span class="op">$</span>osm_points[<span class="op">!</span><span class="kw">is.na</span>(ff.sf<span class="op">$</span>osm_points<span class="op">$</span>amenity),]
ff.sf.pol &lt;-<span class="st"> </span>ff.sf<span class="op">$</span>osm_polygons
<span class="kw">st_geometry</span>(ff.sf.pol) &lt;-<span class="st"> </span><span class="kw">st_centroid</span>(<span class="kw">st_geometry</span>(ff.sf.pol))
<span class="co"># Extraction des cafés</span>
caf &lt;-<span class="st"> </span><span class="kw">add_osm_feature</span>(<span class="dt">opq =</span> q, <span class="dt">key =</span> <span class="st">&#39;amenity&#39;</span>, <span class="dt">value =</span> <span class="st">&quot;cafe&quot;</span> )
caf.sf &lt;-<span class="st"> </span><span class="kw">osmdata_sf</span>(caf)
caf.sf.pts  &lt;-<span class="st"> </span>caf.sf<span class="op">$</span>osm_points[<span class="op">!</span><span class="kw">is.na</span>(caf.sf<span class="op">$</span>osm_points<span class="op">$</span>amenity),]
caf.sf.pol &lt;-<span class="st"> </span>caf.sf<span class="op">$</span>osm_polygons
<span class="kw">st_geometry</span>(caf.sf.pol) &lt;-<span class="st"> </span><span class="kw">st_centroid</span>(<span class="kw">st_geometry</span>(caf.sf.pol))
<span class="co"># regroupement des 3 types d&#39;établissement</span>
resto &lt;-<span class="st"> </span><span class="kw">rbind</span>(
  res.sf.pts[, <span class="kw">c</span>(<span class="st">&quot;osm_id&quot;</span>, <span class="st">&quot;name&quot;</span>)], res.sf.pol[, <span class="kw">c</span>(<span class="st">&quot;osm_id&quot;</span>, <span class="st">&quot;name&quot;</span>)], 
  ff.sf.pts[, <span class="kw">c</span>(<span class="st">&quot;osm_id&quot;</span>, <span class="st">&quot;name&quot;</span>)], ff.sf.pol[, <span class="kw">c</span>(<span class="st">&quot;osm_id&quot;</span>, <span class="st">&quot;name&quot;</span>)], 
  caf.sf.pts[, <span class="kw">c</span>(<span class="st">&quot;osm_id&quot;</span>, <span class="st">&quot;name&quot;</span>)], caf.sf.pol[, <span class="kw">c</span>(<span class="st">&quot;osm_id&quot;</span>, <span class="st">&quot;name&quot;</span>)]
)
resto &lt;-<span class="st"> </span><span class="kw">st_transform</span>(resto, <span class="kw">st_crs</span>(mtq))

<span class="co"># Affichage des restaurants</span>
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(mtq), <span class="dt">col=</span><span class="st">&quot;darkseagreen3&quot;</span>, <span class="dt">border=</span><span class="st">&quot;darkseagreen4&quot;</span>,  
     <span class="dt">bg =</span> <span class="st">&quot;lightblue1&quot;</span>)
<span class="kw">plot</span>(<span class="kw">st_geometry</span>(resto), <span class="dt">add=</span><span class="ot">TRUE</span>, <span class="dt">pch=</span><span class="dv">20</span>, <span class="dt">col =</span> <span class="st">&quot;#330A5FFF&quot;</span>, <span class="dt">cex =</span> <span class="fl">0.5</span>)
<span class="kw">title</span>(<span class="st">&quot;Répartition des restaurants&quot;</span>)
<span class="kw">mtext</span>(<span class="dt">text =</span> <span class="st">&quot;INSEE, 2016 - OSM, 2018&quot;</span>,<span class="dt">side =</span> <span class="dv">1</span>, <span class="dt">line =</span> <span class="dv">-1</span>, <span class="dt">cex =</span> <span class="fl">0.8</span>)</code></pre>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-14-1.png" width="460.8" style="display: block; margin: auto;" /></p>
<!-- ## Pour aller plus loin -->
<!-- * liens vers d'autres ressources (blogs, github, liens) -->

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-sf">
<p>Pebesma, Edzer. 2018a. <em>Sf: Simple Features for R</em>. <a href="https://CRAN.R-project.org/package=sf" class="uri">https://CRAN.R-project.org/package=sf</a>.</p>
</div>
<div id="ref-Pebesma18">
<p>Pebesma, Edzer. 2018b. “Simple Features for R: Standardized Support for Spatial Vector Data.” <em>The R Journal</em>. <a href="https://journal.r-project.org/archive/2018/RJ-2018-009/index.html" class="uri">https://journal.r-project.org/archive/2018/RJ-2018-009/index.html</a>.</p>
</div>
<div id="ref-R-photon">
<p>Giraud, Timothée. 2017b. <em>Photon: Geocode Locations with Photon Api</em>. <a href="https://github.com/rCarto/photon" class="uri">https://github.com/rCarto/photon</a>.</p>
</div>
<div id="ref-R-nominatim">
<p>Rudis, Bob. 2019. <em>Nominatim: Tools for Working with the ’Nominatim’ Api</em>.</p>
</div>
<div id="ref-R-banR">
<p>Gombin, Joel, and Paul-Antoine Chevalier. 2017. <em>BanR: R Client for the Ban Api</em>. <a href="https://CRAN.R-project.org/package=banR" class="uri">https://CRAN.R-project.org/package=banR</a>.</p>
</div>
<div id="ref-R-osmdata">
<p>Padgham, Mark, Bob Rudis, Robin Lovelace, and Maëlle Salmon. 2017. “Osmdata.” <em>The Journal of Open Source Software</em> 2 (14). The Open Journal. <a href="https://doi.org/10.21105/joss.00305" class="uri">https://doi.org/10.21105/joss.00305</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapitre2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["Cartographie_avec_R.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 2 Cartographie thématique | Cartographie avec R</title>
  <meta name="description" content="Chapitre 2 Cartographie thématique | Cartographie avec R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 2 Cartographie thématique | Cartographie avec R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapitre 2 Cartographie thématique | Cartographie avec R" />
  <meta name="github-repo" content="rCarto/carto_avec_r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 2 Cartographie thématique | Cartographie avec R" />
  
  <meta name="twitter:description" content="Chapitre 2 Cartographie thématique | Cartographie avec R" />
  

<meta name="author" content="Timothée Giraud &amp; Hugues Pecout" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapitre1.html"/>
<link rel="next" href="chapitre3.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/fgb.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/flatgeobuf-geojson.min.js"></script>
<script src="libs/chromajs-2.1.0/chroma.min.js"></script>
<link id="resto-1-attachment" rel="attachment" href="libs/resto-0.0.1/resto_layer.fgb"/>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<link id="mtq-1-attachment" rel="attachment" href="libs/mtq-0.0.1/mtq_layer.fgb"/>
<link id="Restaurants-1-attachment" rel="attachment" href="libs/Restaurants-0.0.1/Restaurants_layer.fgb"/>
<link id="Communes-1-attachment" rel="attachment" href="libs/Communes-0.0.1/Communes_layer.fgb"/>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Cartographie avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="chapitre1.html"><a href="chapitre1.html"><i class="fa fa-check"></i><b>1</b> Les données spatiales</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chapitre1.html"><a href="chapitre1.html#le-package-sf"><i class="fa fa-check"></i><b>1.1</b> Le package <code>sf</code></a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="chapitre1.html"><a href="chapitre1.html#format-des-objets-spatiaux-sf"><i class="fa fa-check"></i><b>1.1.1</b> Format des objets spatiaux <code>sf</code></a></li>
<li class="chapter" data-level="1.1.2" data-path="chapitre1.html"><a href="chapitre1.html#import-export"><i class="fa fa-check"></i><b>1.1.2</b> Import / Export</a></li>
<li class="chapter" data-level="1.1.3" data-path="chapitre1.html"><a href="chapitre1.html#affichage-de-données"><i class="fa fa-check"></i><b>1.1.3</b> Affichage de données</a></li>
<li class="chapter" data-level="1.1.4" data-path="chapitre1.html"><a href="chapitre1.html#joindre-des-données"><i class="fa fa-check"></i><b>1.1.4</b> Joindre des données</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="chapitre1.html"><a href="chapitre1.html#les-systèmes-de-projections"><i class="fa fa-check"></i><b>1.2</b> Les systèmes de projections</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="chapitre1.html"><a href="chapitre1.html#consulter-la-projection-dun-objet"><i class="fa fa-check"></i><b>1.2.1</b> Consulter la projection d’un objet</a></li>
<li class="chapter" data-level="1.2.2" data-path="chapitre1.html"><a href="chapitre1.html#modifier-la-projection-dun-objet"><i class="fa fa-check"></i><b>1.2.2</b> Modifier la projection d’un objet</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="chapitre1.html"><a href="chapitre1.html#opérations-de-géotraitement"><i class="fa fa-check"></i><b>1.3</b> Opérations de géotraitement</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="chapitre1.html"><a href="chapitre1.html#sélection-par-attributs"><i class="fa fa-check"></i><b>1.3.1</b> Sélection par attributs</a></li>
<li class="chapter" data-level="1.3.2" data-path="chapitre1.html"><a href="chapitre1.html#sélection-spatiale"><i class="fa fa-check"></i><b>1.3.2</b> Sélection spatiale</a></li>
<li class="chapter" data-level="1.3.3" data-path="chapitre1.html"><a href="chapitre1.html#extraire-des-centroides"><i class="fa fa-check"></i><b>1.3.3</b> Extraire des centroides</a></li>
<li class="chapter" data-level="1.3.4" data-path="chapitre1.html"><a href="chapitre1.html#créer-une-matrice-de-distances"><i class="fa fa-check"></i><b>1.3.4</b> Créer une matrice de distances</a></li>
<li class="chapter" data-level="1.3.5" data-path="chapitre1.html"><a href="chapitre1.html#agréger-des-polygones"><i class="fa fa-check"></i><b>1.3.5</b> Agréger des polygones</a></li>
<li class="chapter" data-level="1.3.6" data-path="chapitre1.html"><a href="chapitre1.html#agréger-des-polygones-en-fonction-dune-variable"><i class="fa fa-check"></i><b>1.3.6</b> Agréger des polygones en fonction d’une variable</a></li>
<li class="chapter" data-level="1.3.7" data-path="chapitre1.html"><a href="chapitre1.html#construire-une-zone-tampon"><i class="fa fa-check"></i><b>1.3.7</b> Construire une zone tampon</a></li>
<li class="chapter" data-level="1.3.8" data-path="chapitre1.html"><a href="chapitre1.html#réaliser-une-intersection"><i class="fa fa-check"></i><b>1.3.8</b> Réaliser une intersection</a></li>
<li class="chapter" data-level="1.3.9" data-path="chapitre1.html"><a href="chapitre1.html#compter-des-points-dans-un-polygone"><i class="fa fa-check"></i><b>1.3.9</b> Compter des points dans un polygone</a></li>
<li class="chapter" data-level="1.3.10" data-path="chapitre1.html"><a href="chapitre1.html#construire-des-polygones-de-voronoi"><i class="fa fa-check"></i><b>1.3.10</b> Construire des polygones de Voronoi</a></li>
<li class="chapter" data-level="1.3.11" data-path="chapitre1.html"><a href="chapitre1.html#construction-dobjets-sf"><i class="fa fa-check"></i><b>1.3.11</b> Construction d’objets sf</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="chapitre1.html"><a href="chapitre1.html#géocodage-dadresses"><i class="fa fa-check"></i><b>1.4</b> Géocodage d’adresses</a></li>
<li class="chapter" data-level="1.5" data-path="chapitre1.html"><a href="chapitre1.html#importer-des-données-osm"><i class="fa fa-check"></i><b>1.5</b> Importer des données OSM</a></li>
<li class="chapter" data-level="1.6" data-path="chapitre1.html"><a href="chapitre1.html#exercices"><i class="fa fa-check"></i><b>1.6</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapitre2.html"><a href="chapitre2.html"><i class="fa fa-check"></i><b>2</b> Cartographie thématique</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chapitre2.html"><a href="chapitre2.html#le-package-cartography"><i class="fa fa-check"></i><b>2.1</b> Le package <code>cartography</code></a></li>
<li class="chapter" data-level="2.2" data-path="chapitre2.html"><a href="chapitre2.html#représentations-usuelles"><i class="fa fa-check"></i><b>2.2</b> Représentations usuelles</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="chapitre2.html"><a href="chapitre2.html#carte-de-symboles-proportionnels"><i class="fa fa-check"></i><b>2.2.1</b> Carte de symboles proportionnels</a></li>
<li class="chapter" data-level="2.2.2" data-path="chapitre2.html"><a href="chapitre2.html#carte-choroplèthe"><i class="fa fa-check"></i><b>2.2.2</b> Carte choroplèthe</a></li>
<li class="chapter" data-level="2.2.3" data-path="chapitre2.html"><a href="chapitre2.html#carte-de-typologie"><i class="fa fa-check"></i><b>2.2.3</b> Carte de typologie</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chapitre2.html"><a href="chapitre2.html#combinaisons-de-représentations"><i class="fa fa-check"></i><b>2.3</b> Combinaisons de représentations</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="chapitre2.html"><a href="chapitre2.html#carte-de-stocks-et-de-ratios"><i class="fa fa-check"></i><b>2.3.1</b> Carte de stocks et de ratios</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapitre2.html"><a href="chapitre2.html#carte-de-stocks-et-de-qualitative"><i class="fa fa-check"></i><b>2.3.2</b> Carte de stocks et de qualitative</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chapitre2.html"><a href="chapitre2.html#mise-en-page"><i class="fa fa-check"></i><b>2.4</b> Mise en page</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="chapitre2.html"><a href="chapitre2.html#habillage-complet"><i class="fa fa-check"></i><b>2.4.1</b> Habillage complet</a></li>
<li class="chapter" data-level="2.4.2" data-path="chapitre2.html"><a href="chapitre2.html#flèche-dorientation"><i class="fa fa-check"></i><b>2.4.2</b> Flèche d’orientation</a></li>
<li class="chapter" data-level="2.4.3" data-path="chapitre2.html"><a href="chapitre2.html#échelle"><i class="fa fa-check"></i><b>2.4.3</b> Échelle</a></li>
<li class="chapter" data-level="2.4.4" data-path="chapitre2.html"><a href="chapitre2.html#étiquettes"><i class="fa fa-check"></i><b>2.4.4</b> Étiquettes</a></li>
<li class="chapter" data-level="2.4.5" data-path="chapitre2.html"><a href="chapitre2.html#ajuster-les-marges-dune-figure"><i class="fa fa-check"></i><b>2.4.5</b> Ajuster les marges d’une figure</a></li>
<li class="chapter" data-level="2.4.6" data-path="chapitre2.html"><a href="chapitre2.html#centrer-la-carte-sur-une-région"><i class="fa fa-check"></i><b>2.4.6</b> Centrer la carte sur une région</a></li>
<li class="chapter" data-level="2.4.7" data-path="chapitre2.html"><a href="chapitre2.html#afficher-plusieurs-cartes-sur-la-même-figure"><i class="fa fa-check"></i><b>2.4.7</b> Afficher plusieurs cartes sur la même figure</a></li>
<li class="chapter" data-level="2.4.8" data-path="chapitre2.html"><a href="chapitre2.html#obtenir-un-ratio-de-figure-adapté"><i class="fa fa-check"></i><b>2.4.8</b> Obtenir un ratio de figure adapté</a></li>
<li class="chapter" data-level="2.4.9" data-path="chapitre2.html"><a href="chapitre2.html#ajouter-une-image-sur-une-carte"><i class="fa fa-check"></i><b>2.4.9</b> Ajouter une image sur une carte</a></li>
<li class="chapter" data-level="2.4.10" data-path="chapitre2.html"><a href="chapitre2.html#placer-précisément-un-élément-sur-la-carte"><i class="fa fa-check"></i><b>2.4.10</b> Placer précisément un élément sur la carte</a></li>
<li class="chapter" data-level="2.4.11" data-path="chapitre2.html"><a href="chapitre2.html#utiliser-un-fond-de-carte-osm"><i class="fa fa-check"></i><b>2.4.11</b> Utiliser un fond de carte OSM</a></li>
<li class="chapter" data-level="2.4.12" data-path="chapitre2.html"><a href="chapitre2.html#créer-un-effet-crayonné"><i class="fa fa-check"></i><b>2.4.12</b> Créer un effet crayonné</a></li>
<li class="chapter" data-level="2.4.13" data-path="chapitre2.html"><a href="chapitre2.html#ajouter-un-ombrage-à-une-couche"><i class="fa fa-check"></i><b>2.4.13</b> Ajouter un ombrage à une couche</a></li>
<li class="chapter" data-level="2.4.14" data-path="chapitre2.html"><a href="chapitre2.html#création-de-cartons"><i class="fa fa-check"></i><b>2.4.14</b> Création de cartons</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="chapitre2.html"><a href="chapitre2.html#exercices-1"><i class="fa fa-check"></i><b>2.5</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapitre3.html"><a href="chapitre3.html"><i class="fa fa-check"></i><b>3</b> Cartographie thématique avancée</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapitre3.html"><a href="chapitre3.html#les-cartes-de-discontinuités"><i class="fa fa-check"></i><b>3.1</b> Les cartes de discontinuités</a></li>
<li class="chapter" data-level="3.2" data-path="chapitre3.html"><a href="chapitre3.html#les-grilles-régulières"><i class="fa fa-check"></i><b>3.2</b> Les grilles régulières</a></li>
<li class="chapter" data-level="3.3" data-path="chapitre3.html"><a href="chapitre3.html#le-lissage-spatial"><i class="fa fa-check"></i><b>3.3</b> Le lissage spatial</a></li>
<li class="chapter" data-level="3.4" data-path="chapitre3.html"><a href="chapitre3.html#cartes-en-3d"><i class="fa fa-check"></i><b>3.4</b> Cartes en 3D</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="chapitre3.html"><a href="chapitre3.html#linemap"><i class="fa fa-check"></i><b>3.4.1</b> linemap</a></li>
<li class="chapter" data-level="3.4.2" data-path="chapitre3.html"><a href="chapitre3.html#relief-tanaka"><i class="fa fa-check"></i><b>3.4.2</b> Relief Tanaka</a></li>
<li class="chapter" data-level="3.4.3" data-path="chapitre3.html"><a href="chapitre3.html#rayshader"><i class="fa fa-check"></i><b>3.4.3</b> Rayshader</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="chapitre3.html"><a href="chapitre3.html#les-cartogrammes"><i class="fa fa-check"></i><b>3.5</b> Les cartogrammes</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="chapitre3.html"><a href="chapitre3.html#les-cartogrammes-de-dorling"><i class="fa fa-check"></i><b>3.5.1</b> Les cartogrammes de Dorling</a></li>
<li class="chapter" data-level="3.5.2" data-path="chapitre3.html"><a href="chapitre3.html#les-cartogrammes-non-continus"><i class="fa fa-check"></i><b>3.5.2</b> Les cartogrammes non continus</a></li>
<li class="chapter" data-level="3.5.3" data-path="chapitre3.html"><a href="chapitre3.html#les-cartogrammes-continus"><i class="fa fa-check"></i><b>3.5.3</b> Les cartogrammes continus</a></li>
<li class="chapter" data-level="3.5.4" data-path="chapitre3.html"><a href="chapitre3.html#forces-et-faiblesses-des-cartogrammes"><i class="fa fa-check"></i><b>3.5.4</b> Forces et faiblesses des cartogrammes</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="chapitre3.html"><a href="chapitre3.html#cartographie-interactive"><i class="fa fa-check"></i><b>3.6</b> Cartographie interactive</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sessioninfo.html"><a href="sessioninfo.html"><i class="fa fa-check"></i><b>4</b> <code>sessionInfo()</code></a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rCarto/carto_avec_r" target="blank">Contribuer</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cartographie avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapitre2" class="section level1" number="2">
<h1><span class="header-section-number">Chapitre 2</span> Cartographie thématique</h1>
<p>Nous ne détaillerons pas ici les règles de la cartographie thématique.
Le lecteur pourra se référer à divers ouvrages de référence : <span class="citation"><a href="references.html#ref-Bertin67" role="doc-biblioref">Bertin</a> (<a href="references.html#ref-Bertin67" role="doc-biblioref">1967</a>)</span>, <span class="citation"><a href="references.html#ref-Beguin10" role="doc-biblioref">Pumain and Béguin</a> (<a href="references.html#ref-Beguin10" role="doc-biblioref">2010</a>)</span>, <span class="citation"><a href="references.html#ref-Lambert16" role="doc-biblioref">Lambert and Zanin</a> (<a href="references.html#ref-Lambert16" role="doc-biblioref">2016</a>)</span>.<br />
Plusieurs packages peuvent être utilisés pour réaliser des cartes thématique. Le package <code>ggplot2</code> <span class="citation">(<a href="references.html#ref-Wickham16" role="doc-biblioref">Wickham 2016</a>)</span> par exemple permet d’afficher des objets spatiaux et de réaliser des cartes thématiques simples. Le package <code>tmap</code> <span class="citation">(<a href="references.html#ref-Tennekes18" role="doc-biblioref">Tennekes 2018</a>)</span> est dédié à la création de cartes thématiques, il utilise une syntaxe proche de celle de <code>ggplot2</code> (enchaînement d’instructions combinées avec le signe ‘+’). La documentation et les tutoriels pour utiliser ces deux packages sont facilement accessibles sur le web.<br />
Dans ce chapitre nous utiliserons principalement le package <code>cartography</code> <span class="citation">(<a href="references.html#ref-R-cartography" role="doc-biblioref">Giraud and Lambert 2018a</a>)</span> dont les fonctionnalités sont assez complètes et qui est mieux maitrisé pas les auteurs du manuel.</p>
<div id="le-package-cartography" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Le package <code>cartography</code></h2>
<p><img src="img/logo.png" align="right" alt="" width="120" /></p>
<p>Le package <code>cartography</code> permet de créer et d’intégrer des cartes thématiques dans sa chaîne de traitements avec R. Il permet des représentations cartographiques telles que les cartes de symboles proportionnels, des cartes choroplèthes, des typologies, des cartes de flux ou des cartes de discontinuités. Il offre également des fonctions qui permettent d’améliorer la réalisation de la carte, comme des palettes de couleur, des éléments d’habillage (échelle, flèche du nord, titre, légende…), d’y rattacher des labels ou d’accéder à des APIs cartographiques.</p>
<p>Pour utiliser ce package plusieurs sources peuvent être consultées :</p>
<ul>
<li>La documentation du package accessible <a href="http://riatelab.github.io/cartography/docs/" target="_blank">sur internet</a> ou directement dans R (<code>?cartography</code>),</li>
<li>La <a href="https://CRAN.R-project.org/package=cartography/vignettes/cartography.html" target="_blank">vignette</a> associée au package présente des exemples de scripts,</li>
<li>Le blog <a href="https://rgeomatic.hypotheses.org/" target="_blank">R Géomatique</a> qui met à disposition ressources et exemples liés au package et plus généralement à l’écosystème spatiale de R,</li>
<li>La <a href="http://riatelab.github.io/cartography/vignettes/cheatsheet/cartography_cheatsheet.pdf" target="_blank">cheat sheet</a> de cartography, qui résume les principales fonctions du package de façon synthétique.</li>
</ul>
<p><img src="img/cheat_sheet.png" width="1000" style="display: block; margin: auto;" /></p>
<p>Les fonctions de <code>cartography</code> dédiées à la représentation utilisent le suffixe <code>Layer</code>.
En général l’argument <code>x</code> est utilisé par un objet <code>sf</code> et l’argument <code>var</code> sert à renseigner la variable à représenter.</p>
</div>
<div id="représentations-usuelles" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Représentations usuelles</h2>
<div id="carte-de-symboles-proportionnels" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Carte de symboles proportionnels</h3>
<p>Les cartes de symboles proportionnels sont utilisées pour représenter les variables de stocks (variables quantitatives absolues, la somme et la moyenne ont un sens).
La fonction <code>propSymbolsLayer()</code> propose cette représentation, plusieurs symboles sont disponibles : cercles, carrés et barres.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="chapitre2.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cartography)</span>
<span id="cb65-2"><a href="chapitre2.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb65-3"><a href="chapitre2.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Import des données</span></span>
<span id="cb65-4"><a href="chapitre2.html#cb65-4" aria-hidden="true" tabindex="-1"></a>mtq <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="fu">system.file</span>(<span class="st">&quot;gpkg/mtq.gpkg&quot;</span>, <span class="at">package=</span><span class="st">&quot;cartography&quot;</span>), </span>
<span id="cb65-5"><a href="chapitre2.html#cb65-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-6"><a href="chapitre2.html#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Communes</span></span>
<span id="cb65-7"><a href="chapitre2.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb65-8"><a href="chapitre2.html#cb65-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(mtq), </span>
<span id="cb65-9"><a href="chapitre2.html#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;lightblue4&quot;</span>, </span>
<span id="cb65-10"><a href="chapitre2.html#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">&quot;lightblue3&quot;</span>, </span>
<span id="cb65-11"><a href="chapitre2.html#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">bg =</span> <span class="st">&quot;lightblue1&quot;</span></span>
<span id="cb65-12"><a href="chapitre2.html#cb65-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb65-13"><a href="chapitre2.html#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Symboles proportionnels</span></span>
<span id="cb65-14"><a href="chapitre2.html#cb65-14" aria-hidden="true" tabindex="-1"></a><span class="fu">propSymbolsLayer</span>(</span>
<span id="cb65-15"><a href="chapitre2.html#cb65-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> mtq, </span>
<span id="cb65-16"><a href="chapitre2.html#cb65-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> <span class="st">&quot;POP&quot;</span>, </span>
<span id="cb65-17"><a href="chapitre2.html#cb65-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.title.txt =</span> <span class="st">&quot;Population totale</span><span class="sc">\n</span><span class="st">(2015)&quot;</span></span>
<span id="cb65-18"><a href="chapitre2.html#cb65-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb65-19"><a href="chapitre2.html#cb65-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Titre</span></span>
<span id="cb65-20"><a href="chapitre2.html#cb65-20" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> <span class="st">&quot;Population en Martinique&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/propS-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="carte-choroplèthe" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Carte choroplèthe</h3>
<p>Les cartes choroplèthes sont utilisées pour représenter les variables de ratios (variables quantitatives relatives, la moyenne a un sens, la somme n’a pas de sens).</p>
<p>Pour ce genre de représentation il faut au préalable :</p>
<ul>
<li>choisir une méthode de discrétisation pour transformer une série statistique continue en classes définies par des intervalles,</li>
<li>choisir un nombre de classes,</li>
<li>choisir une palette de couleurs.</li>
</ul>
<p>La fonction <code>choroLayer()</code> permet de créer des cartes choroplètes . Les arguments <code>nclass</code>, <code>method</code> et <code>breaks</code> servent à paramétrer les discrétisations et la fonction <code>getBreaks()</code> permet de travailler sur les discrétisations en dehors de la fonction <code>choroLayer()</code>. De même, l’argument <code>col</code> est utilisé pour renseigner une palette de couleur mais plusieurs fonctions peuvent être utilisées pour paramétrer les palettes en dehors de la fonction (<code>carto.pal()</code>…).</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="chapitre2.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Densité de population (hab./km2) en utilisant la fonction sf::st_area()</span></span>
<span id="cb66-2"><a href="chapitre2.html#cb66-2" aria-hidden="true" tabindex="-1"></a>mtq<span class="sc">$</span>POPDENS <span class="ot">&lt;-</span> <span class="fl">1e6</span> <span class="sc">*</span> mtq<span class="sc">$</span>POP <span class="sc">/</span> <span class="fu">as.numeric</span>(<span class="fu">st_area</span>(mtq))</span>
<span id="cb66-3"><a href="chapitre2.html#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">choroLayer</span>(</span>
<span id="cb66-4"><a href="chapitre2.html#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> mtq, </span>
<span id="cb66-5"><a href="chapitre2.html#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> <span class="st">&quot;POPDENS&quot;</span>, </span>
<span id="cb66-6"><a href="chapitre2.html#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">75</span>, <span class="dv">168</span>, <span class="dv">377</span>, <span class="dv">845</span>, <span class="dv">1895</span>),</span>
<span id="cb66-7"><a href="chapitre2.html#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;#F1B1B4&quot;</span>, <span class="st">&quot;#E3898E&quot;</span>, <span class="st">&quot;#D35E63&quot;</span>, <span class="st">&quot;#BD2D33&quot;</span>, <span class="st">&quot;#7E1512&quot;</span>),</span>
<span id="cb66-8"><a href="chapitre2.html#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.title.txt =</span> <span class="st">&quot;Densité de population</span><span class="sc">\n</span><span class="st">(habitants par km2)&quot;</span></span>
<span id="cb66-9"><a href="chapitre2.html#cb66-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb66-10"><a href="chapitre2.html#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> <span class="st">&quot;Distribution de la population en Martinique (2015)&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/choro-1.png" width="384" style="display: block; margin: auto;" /></p>
<div id="discretisation" class="section level4" number="2.2.2.1">
<h4><span class="header-section-number">2.2.2.1</span> Discrétisations</h4>
<p>La fonction <code>getBreaks()</code> met à disposition les méthodes de discrétisations de variables classique : quantiles, moyenn/écart-type, amplitudes égales, moyennes emboitées, Fisher-Jenks, géométrique …</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="chapitre2.html#cb67-1" aria-hidden="true" tabindex="-1"></a>var <span class="ot">&lt;-</span> mtq<span class="sc">$</span>POPDENS</span>
<span id="cb67-2"><a href="chapitre2.html#cb67-2" aria-hidden="true" tabindex="-1"></a>moy <span class="ot">&lt;-</span> <span class="fu">mean</span>(var)</span>
<span id="cb67-3"><a href="chapitre2.html#cb67-3" aria-hidden="true" tabindex="-1"></a>med <span class="ot">&lt;-</span> <span class="fu">median</span>(var)</span>
<span id="cb67-4"><a href="chapitre2.html#cb67-4" aria-hidden="true" tabindex="-1"></a>std <span class="ot">&lt;-</span> <span class="fu">sd</span>(var)</span>
<span id="cb67-5"><a href="chapitre2.html#cb67-5" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">getBreaks</span>(<span class="at">v =</span> var, <span class="at">nclass =</span> <span class="dv">5</span>, <span class="at">method =</span> <span class="st">&quot;quantile&quot;</span>)</span>
<span id="cb67-6"><a href="chapitre2.html#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(var, <span class="at">probability =</span> <span class="cn">TRUE</span>, <span class="at">breaks =</span> breaks, <span class="at">main=</span><span class="st">&quot;quantiles&quot;</span>,</span>
<span id="cb67-7"><a href="chapitre2.html#cb67-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">carto.pal</span>(<span class="at">pal1 =</span> <span class="st">&quot;wine.pal&quot;</span>,<span class="dv">3</span>, <span class="st">&quot;green.pal&quot;</span>, <span class="dv">3</span>))</span>
<span id="cb67-8"><a href="chapitre2.html#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rug</span>(var)</span>
<span id="cb67-9"><a href="chapitre2.html#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> med, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/discr2-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="chapitre2.html#cb68-1" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">getBreaks</span>(<span class="at">v =</span> var, <span class="at">nclass=</span><span class="dv">5</span>, <span class="at">method =</span> <span class="st">&quot;geom&quot;</span>)</span>
<span id="cb68-2"><a href="chapitre2.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(var, <span class="at">probability =</span> <span class="cn">TRUE</span>, <span class="at">breaks =</span> breaks, <span class="at">main=</span><span class="st">&quot;progression géométrique&quot;</span>,</span>
<span id="cb68-3"><a href="chapitre2.html#cb68-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="fu">carto.pal</span>(<span class="at">pal1 =</span> <span class="st">&quot;wine.pal&quot;</span>,<span class="dv">6</span>))</span>
<span id="cb68-4"><a href="chapitre2.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rug</span>(var)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/discr3-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="palettes" class="section level4" number="2.2.2.2">
<h4><span class="header-section-number">2.2.2.2</span> Palettes de couleurs</h4>
<p>La fonction <code>display.carto.all()</code> permet d’afficher toutes palettes de couleurs disponibles dans <code>cartography</code>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="chapitre2.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">display.carto.all</span>(<span class="dv">20</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/pa-1.png" width="384" style="display: block; margin: auto;" /></p>
<p>La fonction <code>display.carto.pal()</code> permet de détailler une palette de couleurs.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="chapitre2.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">display.carto.pal</span>(<span class="st">&quot;turquoise.pal&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/pal1-1.png" width="384" style="display: block; margin: auto;" /></p>
<p>La fonction <code>carto.pal()</code> permet de construire une palette de couleur.
Il est possible de créer des palettes associant 2 couleurs.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="chapitre2.html#cb71-1" aria-hidden="true" tabindex="-1"></a>mypal <span class="ot">&lt;-</span> <span class="fu">carto.pal</span>(<span class="at">pal1 =</span> <span class="st">&quot;wine.pal&quot;</span>, <span class="at">n1 =</span> <span class="dv">5</span>, <span class="at">pal2 =</span> <span class="st">&quot;green.pal&quot;</span>, <span class="at">n2 =</span> <span class="dv">4</span>)</span>
<span id="cb71-2"><a href="chapitre2.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">1</span>, <span class="fu">as.matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>), <span class="at">col=</span>mypal, <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;&quot;</span>, <span class="at">xaxt =</span> <span class="st">&quot;n&quot;</span>, </span>
<span id="cb71-3"><a href="chapitre2.html#cb71-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">yaxt =</span> <span class="st">&quot;n&quot;</span>,<span class="at">bty =</span> <span class="st">&quot;n&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/pal2-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="carte-de-typologie" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Carte de typologie</h3>
<p>Les cartes de typologies sont utilisées pour représenter les variables qualitatives.
La fonction <code>typoLayer()</code> propose cette représentation. L’argument <code>legend.values.order</code> sert à ordonner les modalités dans la légende.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="chapitre2.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typoLayer</span>(</span>
<span id="cb72-2"><a href="chapitre2.html#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> mtq, </span>
<span id="cb72-3"><a href="chapitre2.html#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var=</span><span class="st">&quot;STATUS&quot;</span>,</span>
<span id="cb72-4"><a href="chapitre2.html#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;aquamarine4&quot;</span>, <span class="st">&quot;yellow3&quot;</span>,<span class="st">&quot;wheat&quot;</span>), </span>
<span id="cb72-5"><a href="chapitre2.html#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">lwd =</span> .<span class="dv">7</span>,</span>
<span id="cb72-6"><a href="chapitre2.html#cb72-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.values.order =</span> <span class="fu">c</span>(<span class="st">&quot;Prefecture&quot;</span>,</span>
<span id="cb72-7"><a href="chapitre2.html#cb72-7" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;Sub-prefecture&quot;</span>, </span>
<span id="cb72-8"><a href="chapitre2.html#cb72-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;Simple municipality&quot;</span>),</span>
<span id="cb72-9"><a href="chapitre2.html#cb72-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.pos =</span> <span class="st">&quot;topright&quot;</span>,</span>
<span id="cb72-10"><a href="chapitre2.html#cb72-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.title.txt =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb72-11"><a href="chapitre2.html#cb72-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb72-12"><a href="chapitre2.html#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;Statut Administratif&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/typolo-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="combinaisons-de-représentations" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Combinaisons de représentations</h2>
<p>Plusieurs fonctions sont dédiées à la représentation combinée de 2 variables.</p>
<div id="carte-de-stocks-et-de-ratios" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Carte de stocks et de ratios</h3>
<p>La fonction <code>propSymbolsChoroLayer()</code> représente des symboles proportionnels dont les surfaces sont proportionnelles aux valeurs d’une variable et dont la couleur repose sur la discrétisation d’une seconde variable. La fonction utilise les arguments des fonctions <code>propSymbolsLayer()</code> et <code>choroLayer()</code>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="chapitre2.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb73-2"><a href="chapitre2.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(mtq), </span>
<span id="cb73-3"><a href="chapitre2.html#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">col=</span><span class="st">&quot;darkseagreen3&quot;</span>, </span>
<span id="cb73-4"><a href="chapitre2.html#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">border=</span><span class="st">&quot;darkseagreen4&quot;</span>,  </span>
<span id="cb73-5"><a href="chapitre2.html#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">bg =</span> <span class="st">&quot;lightblue1&quot;</span></span>
<span id="cb73-6"><a href="chapitre2.html#cb73-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb73-7"><a href="chapitre2.html#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="fu">propSymbolsChoroLayer</span>(</span>
<span id="cb73-8"><a href="chapitre2.html#cb73-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> mtq, </span>
<span id="cb73-9"><a href="chapitre2.html#cb73-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> <span class="st">&quot;POP&quot;</span>, </span>
<span id="cb73-10"><a href="chapitre2.html#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">&quot;grey50&quot;</span>,</span>
<span id="cb73-11"><a href="chapitre2.html#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">lwd =</span> <span class="dv">1</span>,</span>
<span id="cb73-12"><a href="chapitre2.html#cb73-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.var.pos =</span> <span class="st">&quot;topright&quot;</span>, </span>
<span id="cb73-13"><a href="chapitre2.html#cb73-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.var.title.txt =</span> <span class="st">&quot;Population&quot;</span>,</span>
<span id="cb73-14"><a href="chapitre2.html#cb73-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">var2 =</span> <span class="st">&quot;MED&quot;</span>,</span>
<span id="cb73-15"><a href="chapitre2.html#cb73-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;equal&quot;</span>, </span>
<span id="cb73-16"><a href="chapitre2.html#cb73-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">nclass =</span> <span class="dv">4</span>, </span>
<span id="cb73-17"><a href="chapitre2.html#cb73-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">carto.pal</span>(<span class="at">pal1 =</span> <span class="st">&quot;sand.pal&quot;</span>, <span class="at">n1 =</span> <span class="dv">4</span>),</span>
<span id="cb73-18"><a href="chapitre2.html#cb73-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.var2.values.rnd =</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb73-19"><a href="chapitre2.html#cb73-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.var2.pos =</span> <span class="st">&quot;left&quot;</span>, </span>
<span id="cb73-20"><a href="chapitre2.html#cb73-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.var2.title.txt =</span> <span class="st">&quot;Revenu</span><span class="sc">\n</span><span class="st">médian</span><span class="sc">\n</span><span class="st">(en euros)&quot;</span></span>
<span id="cb73-21"><a href="chapitre2.html#cb73-21" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb73-22"><a href="chapitre2.html#cb73-22" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;Population et richesse en Martinique, 2015&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/choroprop-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="carte-de-stocks-et-de-qualitative" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Carte de stocks et de qualitative</h3>
<p>La fonction <code>propSymbolsTypoLayer()</code> représente des symboles proportionnels dont les surfaces sont proportionnelles aux valeurs d’une variable et dont la couleur représente les modalités d’une variable qualitative. La fonction utilise les arguments des fonctions <code>propSymbolsLayer()</code> et <code>typoLayer()</code>.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="chapitre2.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb74-2"><a href="chapitre2.html#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(mtq), </span>
<span id="cb74-3"><a href="chapitre2.html#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">col=</span><span class="st">&quot;darkseagreen3&quot;</span>, </span>
<span id="cb74-4"><a href="chapitre2.html#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">border=</span><span class="st">&quot;darkseagreen4&quot;</span>,  </span>
<span id="cb74-5"><a href="chapitre2.html#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">bg =</span> <span class="st">&quot;lightblue1&quot;</span></span>
<span id="cb74-6"><a href="chapitre2.html#cb74-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-7"><a href="chapitre2.html#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="fu">propSymbolsTypoLayer</span>(</span>
<span id="cb74-8"><a href="chapitre2.html#cb74-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> mtq, </span>
<span id="cb74-9"><a href="chapitre2.html#cb74-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> <span class="st">&quot;POP&quot;</span>, </span>
<span id="cb74-10"><a href="chapitre2.html#cb74-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">symbols =</span> <span class="st">&quot;circle&quot;</span>,</span>
<span id="cb74-11"><a href="chapitre2.html#cb74-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">var2 =</span> <span class="st">&quot;STATUS&quot;</span>,</span>
<span id="cb74-12"><a href="chapitre2.html#cb74-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;aquamarine4&quot;</span>, <span class="st">&quot;yellow3&quot;</span>,<span class="st">&quot;wheat&quot;</span>),</span>
<span id="cb74-13"><a href="chapitre2.html#cb74-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.var.pos =</span> <span class="st">&quot;bottomleft&quot;</span>,</span>
<span id="cb74-14"><a href="chapitre2.html#cb74-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.var.title.txt =</span> <span class="st">&quot;Population</span><span class="sc">\n</span><span class="st">(2015)&quot;</span>,</span>
<span id="cb74-15"><a href="chapitre2.html#cb74-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.var2.title.txt =</span> <span class="st">&quot;Statut administratif&quot;</span>,</span>
<span id="cb74-16"><a href="chapitre2.html#cb74-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.var2.values.order =</span> <span class="fu">c</span>(<span class="st">&quot;Prefecture&quot;</span>,</span>
<span id="cb74-17"><a href="chapitre2.html#cb74-17" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;Sub-prefecture&quot;</span>, </span>
<span id="cb74-18"><a href="chapitre2.html#cb74-18" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;Simple municipality&quot;</span>)</span>
<span id="cb74-19"><a href="chapitre2.html#cb74-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-20"><a href="chapitre2.html#cb74-20" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;Population en Martinique&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/typoprop-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="mise-en-page" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Mise en page</h2>
<p>Pour être finalisée, une carte thématique doit contenir certains éléments aditionnels tels que : le titre, l’auteur, la source, l’échelle, l’orientation…</p>
<div id="habillage-complet" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Habillage complet</h3>
<p>La fonction <code>layoutLayer()</code> permet d’afficher tous ces éléments.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="chapitre2.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;lightblue4&quot;</span>, <span class="at">border =</span> <span class="st">&quot;lightblue3&quot;</span>, </span>
<span id="cb75-2"><a href="chapitre2.html#cb75-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">bg =</span> <span class="st">&quot;lightblue1&quot;</span>)</span>
<span id="cb75-3"><a href="chapitre2.html#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(</span>
<span id="cb75-4"><a href="chapitre2.html#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Martinique&quot;</span>, </span>
<span id="cb75-5"><a href="chapitre2.html#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">sources =</span> <span class="st">&quot;IGN&quot;</span>, </span>
<span id="cb75-6"><a href="chapitre2.html#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">author =</span> <span class="st">&quot;Giraud &amp; Pécout, 2019&quot;</span>,</span>
<span id="cb75-7"><a href="chapitre2.html#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">north =</span> <span class="cn">TRUE</span></span>
<span id="cb75-8"><a href="chapitre2.html#cb75-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/layout1-1.png" width="384" style="display: block; margin: auto;" /></p>
<p>Plusieurs arguments permettent de paramétrer plus finement les éléments d’habillage pour aboutir à des cartes plus personnalisées (<code>tabtitle</code>, <code>col</code>, <code>coltitle</code>, <code>theme</code>…).</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="chapitre2.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;lightblue4&quot;</span>, <span class="at">border =</span> <span class="st">&quot;lightblue3&quot;</span>, </span>
<span id="cb76-2"><a href="chapitre2.html#cb76-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">bg =</span> <span class="st">&quot;lightblue1&quot;</span>)</span>
<span id="cb76-3"><a href="chapitre2.html#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(</span>
<span id="cb76-4"><a href="chapitre2.html#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Martinique&quot;</span>, </span>
<span id="cb76-5"><a href="chapitre2.html#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">sources =</span> <span class="st">&quot;IGN&quot;</span>, </span>
<span id="cb76-6"><a href="chapitre2.html#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">author =</span> <span class="st">&quot;Giraud &amp; Pécout, 2019&quot;</span>,</span>
<span id="cb76-7"><a href="chapitre2.html#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">north =</span> <span class="cn">TRUE</span>, </span>
<span id="cb76-8"><a href="chapitre2.html#cb76-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale =</span> <span class="dv">5</span>,</span>
<span id="cb76-9"><a href="chapitre2.html#cb76-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb76-10"><a href="chapitre2.html#cb76-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">tabtitle =</span> <span class="cn">TRUE</span>, </span>
<span id="cb76-11"><a href="chapitre2.html#cb76-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme =</span> <span class="st">&quot;turquoise.pal&quot;</span></span>
<span id="cb76-12"><a href="chapitre2.html#cb76-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/layout2-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="flèche-dorientation" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Flèche d’orientation</h3>
<p>La fonction <code>north()</code> permet de mieux choisir la position et l’aspect de la flèche d’orientation.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="chapitre2.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;#D1914D&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb77-2"><a href="chapitre2.html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">north</span>(<span class="at">pos =</span> <span class="st">&quot;topleft&quot;</span>, <span class="at">col =</span> <span class="st">&quot;#D1914D&quot;</span>)</span>
<span id="cb77-3"><a href="chapitre2.html#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Martinique&quot;</span>, <span class="at">sources =</span> <span class="st">&quot;IGN&quot;</span>, </span>
<span id="cb77-4"><a href="chapitre2.html#cb77-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">author =</span> <span class="st">&quot;Giraud &amp; Pécout, 2019&quot;</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">scale =</span> <span class="dv">5</span>,</span>
<span id="cb77-5"><a href="chapitre2.html#cb77-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">coltitle =</span> <span class="st">&quot;#D1914D&quot;</span>,<span class="at">tabtitle =</span> <span class="cn">TRUE</span>, <span class="at">postitle =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/north-1.png" width="384" style="display: block; margin: auto;" /></p>
<p>Par défaut, la flèche d’orientation pointe vers le haut de la figure. Il est possible, avec l’argument <code>x</code>, d’utiliser une couche de référence pour indiquer le nord géographique.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="chapitre2.html#cb78-1" aria-hidden="true" tabindex="-1"></a>mtq_proj <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(mtq, <span class="dv">2154</span>)</span>
<span id="cb78-2"><a href="chapitre2.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq_proj), <span class="at">col =</span> <span class="st">&quot;#D1914D&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb78-3"><a href="chapitre2.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="fu">north</span>(<span class="at">pos =</span> <span class="st">&quot;topright&quot;</span>, <span class="at">col =</span> <span class="st">&quot;#D1914D&quot;</span>, <span class="at">x =</span> mtq_proj)</span>
<span id="cb78-4"><a href="chapitre2.html#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Martinique&quot;</span>, <span class="at">sources =</span> <span class="st">&quot;IGN&quot;</span>, </span>
<span id="cb78-5"><a href="chapitre2.html#cb78-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">author =</span> <span class="st">&quot;Giraud &amp; Pécout, 2019&quot;</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">scale =</span> <span class="dv">5</span>,</span>
<span id="cb78-6"><a href="chapitre2.html#cb78-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">coltitle =</span> <span class="st">&quot;#D1914D&quot;</span>,<span class="at">tabtitle =</span> <span class="cn">TRUE</span>, <span class="at">postitle =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/north2-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="échelle" class="section level3" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Échelle</h3>
<p>La fonction <code>barscale()</code> permet de mieux choisir la position et l’aspect de l’échelle.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="chapitre2.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;#D1914D&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb79-2"><a href="chapitre2.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barscale</span>(</span>
<span id="cb79-3"><a href="chapitre2.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">size =</span> <span class="dv">5</span>, </span>
<span id="cb79-4"><a href="chapitre2.html#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb79-5"><a href="chapitre2.html#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex =</span> <span class="fl">1.2</span>, </span>
<span id="cb79-6"><a href="chapitre2.html#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pos =</span> <span class="fu">c</span>(<span class="fl">713712.6</span>,<span class="dv">1594777</span>)</span>
<span id="cb79-7"><a href="chapitre2.html#cb79-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb79-8"><a href="chapitre2.html#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Martinique&quot;</span>, <span class="at">sources =</span> <span class="st">&quot;IGN&quot;</span>, </span>
<span id="cb79-9"><a href="chapitre2.html#cb79-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">author =</span> <span class="st">&quot;Giraud &amp; Pécout, 2019&quot;</span>, <span class="at">scale =</span> <span class="cn">NULL</span>,</span>
<span id="cb79-10"><a href="chapitre2.html#cb79-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">coltitle =</span> <span class="st">&quot;#D1914D&quot;</span>,<span class="at">tabtitle =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/scale-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="étiquettes" class="section level3" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Étiquettes</h3>
<p>La fonction <code>labelLayer()</code> est dédiée à l’afichage d’étiquettes.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="chapitre2.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb80-2"><a href="chapitre2.html#cb80-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>)</span>
<span id="cb80-3"><a href="chapitre2.html#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="fu">labelLayer</span>(</span>
<span id="cb80-4"><a href="chapitre2.html#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> mtq, </span>
<span id="cb80-5"><a href="chapitre2.html#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">txt =</span> <span class="st">&quot;LIBGEO&quot;</span>, </span>
<span id="cb80-6"><a href="chapitre2.html#cb80-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">col=</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb80-7"><a href="chapitre2.html#cb80-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex =</span> <span class="fl">0.7</span>, </span>
<span id="cb80-8"><a href="chapitre2.html#cb80-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">font =</span> <span class="dv">4</span>,</span>
<span id="cb80-9"><a href="chapitre2.html#cb80-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">halo =</span> <span class="cn">TRUE</span>, </span>
<span id="cb80-10"><a href="chapitre2.html#cb80-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">bg =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb80-11"><a href="chapitre2.html#cb80-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">r =</span> <span class="fl">0.1</span>, </span>
<span id="cb80-12"><a href="chapitre2.html#cb80-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">overlap =</span> <span class="cn">FALSE</span>, </span>
<span id="cb80-13"><a href="chapitre2.html#cb80-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">show.lines =</span> <span class="cn">FALSE</span></span>
<span id="cb80-14"><a href="chapitre2.html#cb80-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb80-15"><a href="chapitre2.html#cb80-15" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Communes&quot;</span>, <span class="at">tabtitle =</span> <span class="cn">TRUE</span>, <span class="at">author =</span> <span class="st">&quot;INSEE, 2016&quot;</span>, </span>
<span id="cb80-16"><a href="chapitre2.html#cb80-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">sources =</span><span class="st">&quot;&quot;</span>, <span class="at">north =</span><span class="cn">TRUE</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">scale =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/labs-1.png" width="384" style="display: block; margin: auto;" /></p>
<p>L’argument <code>halo = TRUE</code> permet d’afficher un leger halo autour des étiquettes et l’argument <code>overlap = FALSE</code> permet de créer des étiquettes ne se recouvrant pas.</p>
</div>
<div id="ajuster-les-marges-dune-figure" class="section level3" number="2.4.5">
<h3><span class="header-section-number">2.4.5</span> Ajuster les marges d’une figure</h3>
<p>Pour modifier les marges d’une figure (carte ou autre) il faut utiliser la fonction <code>par()</code> qui défini certains paramètres graphiques des figures et son argument <code>mar</code>.
La fonction <code>dev.off()</code> efface tous les graphiques en mémoire et permet de réinitialiser les valeurs par défaut.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="chapitre2.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modification de la couleur de fond des graphique</span></span>
<span id="cb81-2"><a href="chapitre2.html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">bg=</span><span class="st">&quot;grey90&quot;</span>)</span>
<span id="cb81-3"><a href="chapitre2.html#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">main=</span><span class="st">&quot;Marges par défaut&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/defmarg-1.png" width="384" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="chapitre2.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modification des marges</span></span>
<span id="cb82-2"><a href="chapitre2.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">1.2</span>,<span class="dv">0</span>))</span>
<span id="cb82-3"><a href="chapitre2.html#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">main=</span><span class="st">&quot;Marges paramétrées&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/defmarg-2.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="centrer-la-carte-sur-une-région" class="section level3" number="2.4.6">
<h3><span class="header-section-number">2.4.6</span> Centrer la carte sur une région</h3>
<p>Plusieurs solutions sont possible :</p>
<ul>
<li>La fonction <code>ghostLayer()</code> permet de centrer une carte sur un objet <code>sf</code> particulier.</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="chapitre2.html#cb83-1" aria-hidden="true" tabindex="-1"></a>carbet <span class="ot">&lt;-</span> mtq[mtq<span class="sc">$</span>LIBGEO<span class="sc">==</span><span class="st">&quot;Le Carbet&quot;</span>,]</span>
<span id="cb83-2"><a href="chapitre2.html#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co"># centrage sur la couche cible &quot;invisible&quot;</span></span>
<span id="cb83-3"><a href="chapitre2.html#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ghostLayer</span>(</span>
<span id="cb83-4"><a href="chapitre2.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> carbet,</span>
<span id="cb83-5"><a href="chapitre2.html#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span></span>
<span id="cb83-6"><a href="chapitre2.html#cb83-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb83-7"><a href="chapitre2.html#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="co"># affichage des communes</span></span>
<span id="cb83-8"><a href="chapitre2.html#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb83-9"><a href="chapitre2.html#cb83-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(mtq), </span>
<span id="cb83-10"><a href="chapitre2.html#cb83-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;darkseagreen1&quot;</span>, </span>
<span id="cb83-11"><a href="chapitre2.html#cb83-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb83-12"><a href="chapitre2.html#cb83-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">add=</span><span class="cn">TRUE</span></span>
<span id="cb83-13"><a href="chapitre2.html#cb83-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb83-14"><a href="chapitre2.html#cb83-14" aria-hidden="true" tabindex="-1"></a><span class="co"># affichage de la couche d&#39;intérêt</span></span>
<span id="cb83-15"><a href="chapitre2.html#cb83-15" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb83-16"><a href="chapitre2.html#cb83-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(carbet), </span>
<span id="cb83-17"><a href="chapitre2.html#cb83-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, </span>
<span id="cb83-18"><a href="chapitre2.html#cb83-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb83-19"><a href="chapitre2.html#cb83-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb83-20"><a href="chapitre2.html#cb83-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">add=</span><span class="cn">TRUE</span></span>
<span id="cb83-21"><a href="chapitre2.html#cb83-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb83-22"><a href="chapitre2.html#cb83-22" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(</span>
<span id="cb83-23"><a href="chapitre2.html#cb83-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Le Carbet&quot;</span>, </span>
<span id="cb83-24"><a href="chapitre2.html#cb83-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">sources =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb83-25"><a href="chapitre2.html#cb83-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">author =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb83-26"><a href="chapitre2.html#cb83-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale =</span> <span class="dv">1</span>,</span>
<span id="cb83-27"><a href="chapitre2.html#cb83-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">tabtitle =</span> <span class="cn">TRUE</span>,</span>
<span id="cb83-28"><a href="chapitre2.html#cb83-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">frame=</span><span class="cn">FALSE</span></span>
<span id="cb83-29"><a href="chapitre2.html#cb83-29" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-23-1.png" width="384" style="display: block; margin: auto;" /></p>
<ul>
<li>Afficher une couche de la zone de zoom sans couleur pour le fond et les bordures puis afficher les couches que l’on souhaite afficher.</li>
</ul>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="chapitre2.html#cb84-1" aria-hidden="true" tabindex="-1"></a>carbet <span class="ot">&lt;-</span> mtq[mtq<span class="sc">$</span>LIBGEO<span class="sc">==</span><span class="st">&quot;Le Carbet&quot;</span>,]</span>
<span id="cb84-2"><a href="chapitre2.html#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co"># affichage de la couche de zoom &quot;invisible&quot;</span></span>
<span id="cb84-3"><a href="chapitre2.html#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb84-4"><a href="chapitre2.html#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(carbet), </span>
<span id="cb84-5"><a href="chapitre2.html#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="cn">NA</span>, </span>
<span id="cb84-6"><a href="chapitre2.html#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="cn">NA</span>,</span>
<span id="cb84-7"><a href="chapitre2.html#cb84-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span></span>
<span id="cb84-8"><a href="chapitre2.html#cb84-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb84-9"><a href="chapitre2.html#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="co"># affichage des communes</span></span>
<span id="cb84-10"><a href="chapitre2.html#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb84-11"><a href="chapitre2.html#cb84-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(mtq), </span>
<span id="cb84-12"><a href="chapitre2.html#cb84-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;darkseagreen1&quot;</span>, </span>
<span id="cb84-13"><a href="chapitre2.html#cb84-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb84-14"><a href="chapitre2.html#cb84-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">add=</span><span class="cn">TRUE</span></span>
<span id="cb84-15"><a href="chapitre2.html#cb84-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb84-16"><a href="chapitre2.html#cb84-16" aria-hidden="true" tabindex="-1"></a><span class="co"># affichage de la couche d&#39;intérêt</span></span>
<span id="cb84-17"><a href="chapitre2.html#cb84-17" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb84-18"><a href="chapitre2.html#cb84-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(carbet), </span>
<span id="cb84-19"><a href="chapitre2.html#cb84-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, </span>
<span id="cb84-20"><a href="chapitre2.html#cb84-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb84-21"><a href="chapitre2.html#cb84-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb84-22"><a href="chapitre2.html#cb84-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">add=</span><span class="cn">TRUE</span></span>
<span id="cb84-23"><a href="chapitre2.html#cb84-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb84-24"><a href="chapitre2.html#cb84-24" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(</span>
<span id="cb84-25"><a href="chapitre2.html#cb84-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Le Carbet&quot;</span>, </span>
<span id="cb84-26"><a href="chapitre2.html#cb84-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">sources =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb84-27"><a href="chapitre2.html#cb84-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">author =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb84-28"><a href="chapitre2.html#cb84-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale =</span> <span class="dv">1</span>,</span>
<span id="cb84-29"><a href="chapitre2.html#cb84-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">tabtitle =</span> <span class="cn">TRUE</span>,</span>
<span id="cb84-30"><a href="chapitre2.html#cb84-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">frame=</span><span class="cn">FALSE</span></span>
<span id="cb84-31"><a href="chapitre2.html#cb84-31" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-24-1.png" width="384" style="display: block; margin: auto;" /></p>
<ul>
<li>Utiliser les paramètres <code>xlim</code> et <code>ylim</code> de la fonction <code>plot()</code> aves les valeurs fournies par la fonction <code>st_bbox()</code></li>
</ul>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="chapitre2.html#cb85-1" aria-hidden="true" tabindex="-1"></a>diams <span class="ot">&lt;-</span> mtq[mtq<span class="sc">$</span>LIBGEO<span class="sc">==</span><span class="st">&quot;Le Diamant&quot;</span>,]</span>
<span id="cb85-2"><a href="chapitre2.html#cb85-2" aria-hidden="true" tabindex="-1"></a>diams_bb <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(diams)</span>
<span id="cb85-3"><a href="chapitre2.html#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="co"># affichage des communes</span></span>
<span id="cb85-4"><a href="chapitre2.html#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb85-5"><a href="chapitre2.html#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(mtq), </span>
<span id="cb85-6"><a href="chapitre2.html#cb85-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;darkseagreen1&quot;</span>, </span>
<span id="cb85-7"><a href="chapitre2.html#cb85-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb85-8"><a href="chapitre2.html#cb85-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlim =</span> diams_bb[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)], </span>
<span id="cb85-9"><a href="chapitre2.html#cb85-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylim =</span> diams_bb[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)], </span>
<span id="cb85-10"><a href="chapitre2.html#cb85-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span></span>
<span id="cb85-11"><a href="chapitre2.html#cb85-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb85-12"><a href="chapitre2.html#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="co"># affichage de la couche d&#39;intérêt</span></span>
<span id="cb85-13"><a href="chapitre2.html#cb85-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb85-14"><a href="chapitre2.html#cb85-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_geometry</span>(diams), </span>
<span id="cb85-15"><a href="chapitre2.html#cb85-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, </span>
<span id="cb85-16"><a href="chapitre2.html#cb85-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb85-17"><a href="chapitre2.html#cb85-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb85-18"><a href="chapitre2.html#cb85-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">add=</span><span class="cn">TRUE</span></span>
<span id="cb85-19"><a href="chapitre2.html#cb85-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb85-20"><a href="chapitre2.html#cb85-20" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(</span>
<span id="cb85-21"><a href="chapitre2.html#cb85-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Le Diamant&quot;</span>, </span>
<span id="cb85-22"><a href="chapitre2.html#cb85-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">sources =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb85-23"><a href="chapitre2.html#cb85-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">author =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb85-24"><a href="chapitre2.html#cb85-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale =</span> <span class="dv">1</span>,</span>
<span id="cb85-25"><a href="chapitre2.html#cb85-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">tabtitle =</span> <span class="cn">TRUE</span>,</span>
<span id="cb85-26"><a href="chapitre2.html#cb85-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">frame=</span><span class="cn">FALSE</span></span>
<span id="cb85-27"><a href="chapitre2.html#cb85-27" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-25-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="afficher-plusieurs-cartes-sur-la-même-figure" class="section level3" number="2.4.7">
<h3><span class="header-section-number">2.4.7</span> Afficher plusieurs cartes sur la même figure</h3>
<p>Il faut ici utiliser l’argument <code>mfrow</code> de la fonction <code>par()</code>. Le premier chiffre représente le nombre lignes et le deuxième le nombre de colonnes.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="chapitre2.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># deux lignes et deux colonnes</span></span>
<span id="cb86-2"><a href="chapitre2.html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb86-3"><a href="chapitre2.html#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb86-4"><a href="chapitre2.html#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col=</span><span class="st">&quot;blue&quot;</span>)</span>
<span id="cb86-5"><a href="chapitre2.html#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col=</span><span class="st">&quot;green&quot;</span>)</span>
<span id="cb86-6"><a href="chapitre2.html#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col=</span><span class="st">&quot;yellow&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/mfrow0-1.png" width="384" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="chapitre2.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># une ligne et deux colonnes</span></span>
<span id="cb87-2"><a href="chapitre2.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,.<span class="dv">2</span>,<span class="fl">1.2</span>,.<span class="dv">2</span>))</span>
<span id="cb87-3"><a href="chapitre2.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1ere carte</span></span>
<span id="cb87-4"><a href="chapitre2.html#cb87-4" aria-hidden="true" tabindex="-1"></a>carbet_bb <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(carbet)</span>
<span id="cb87-5"><a href="chapitre2.html#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;darkseagreen1&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb87-6"><a href="chapitre2.html#cb87-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> carbet_bb[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)], <span class="at">ylim =</span> carbet_bb[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)], <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>)</span>
<span id="cb87-7"><a href="chapitre2.html#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(carbet), <span class="at">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb87-8"><a href="chapitre2.html#cb87-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb87-9"><a href="chapitre2.html#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Le Carbet&quot;</span>, <span class="at">sources =</span> <span class="st">&quot;&quot;</span>, <span class="at">author =</span> <span class="st">&quot;&quot;</span>, <span class="at">scale =</span> <span class="dv">1</span>, </span>
<span id="cb87-10"><a href="chapitre2.html#cb87-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">tabtitle =</span> <span class="cn">TRUE</span>, <span class="at">frame=</span><span class="cn">FALSE</span>)</span>
<span id="cb87-11"><a href="chapitre2.html#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2eme carte </span></span>
<span id="cb87-12"><a href="chapitre2.html#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;darkseagreen1&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb87-13"><a href="chapitre2.html#cb87-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> diams_bb[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)], <span class="at">ylim =</span> diams_bb[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)], <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>)</span>
<span id="cb87-14"><a href="chapitre2.html#cb87-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(diams), <span class="at">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb87-15"><a href="chapitre2.html#cb87-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb87-16"><a href="chapitre2.html#cb87-16" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Le Diamant&quot;</span>, <span class="at">sources =</span> <span class="st">&quot;&quot;</span>, <span class="at">author =</span> <span class="st">&quot;&quot;</span>, <span class="at">scale =</span> <span class="dv">1</span>, </span>
<span id="cb87-17"><a href="chapitre2.html#cb87-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">tabtitle =</span> <span class="cn">TRUE</span>, <span class="at">frame=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/mfrow-1.png" width="384" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="chapitre2.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># une ligne et deux colonnes</span></span>
<span id="cb88-2"><a href="chapitre2.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="dv">0</span>,<span class="fl">1.4</span>,<span class="dv">0</span>))</span>
<span id="cb88-3"><a href="chapitre2.html#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1ere carte</span></span>
<span id="cb88-4"><a href="chapitre2.html#cb88-4" aria-hidden="true" tabindex="-1"></a>carbet_bb <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(carbet)</span>
<span id="cb88-5"><a href="chapitre2.html#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;darkseagreen1&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb88-6"><a href="chapitre2.html#cb88-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> carbet_bb[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)], <span class="at">ylim =</span> carbet_bb[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)], <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>)</span>
<span id="cb88-7"><a href="chapitre2.html#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(carbet), <span class="at">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb88-8"><a href="chapitre2.html#cb88-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb88-9"><a href="chapitre2.html#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Le Carbet&quot;</span>, <span class="at">sources =</span> <span class="st">&quot;&quot;</span>, <span class="at">author =</span> <span class="st">&quot;&quot;</span>, <span class="at">scale =</span> <span class="dv">1</span>, </span>
<span id="cb88-10"><a href="chapitre2.html#cb88-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">tabtitle =</span> <span class="cn">TRUE</span>, <span class="at">frame=</span><span class="cn">FALSE</span>)</span>
<span id="cb88-11"><a href="chapitre2.html#cb88-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2eme carte </span></span>
<span id="cb88-12"><a href="chapitre2.html#cb88-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;darkseagreen1&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb88-13"><a href="chapitre2.html#cb88-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> diams_bb[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)], <span class="at">ylim =</span> diams_bb[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)], <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>)</span>
<span id="cb88-14"><a href="chapitre2.html#cb88-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(diams), <span class="at">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb88-15"><a href="chapitre2.html#cb88-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb88-16"><a href="chapitre2.html#cb88-16" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Le Diamant&quot;</span>, <span class="at">sources =</span> <span class="st">&quot;&quot;</span>, <span class="at">author =</span> <span class="st">&quot;&quot;</span>, <span class="at">scale =</span> <span class="dv">1</span>, </span>
<span id="cb88-17"><a href="chapitre2.html#cb88-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">tabtitle =</span> <span class="cn">TRUE</span>, <span class="at">frame=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/mfrow2-1.png" width="288" style="display: block; margin: auto;" /></p>
</div>
<div id="obtenir-un-ratio-de-figure-adapté" class="section level3" number="2.4.8">
<h3><span class="header-section-number">2.4.8</span> Obtenir un ratio de figure adapté</h3>
<p>Il est assez difficile d’exporter des figures (cartes ou autres) dont le ratio hauteur/largeur soit satisfaisant. Le ratio par défaut des figure au format png est de 1 (480x480 pixels) :</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="chapitre2.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="st">&quot;img/martinique1.png&quot;</span>, <span class="at">res =</span> <span class="dv">96</span>)</span>
<span id="cb89-2"><a href="chapitre2.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">1.2</span>,<span class="dv">0</span>), <span class="at">bg =</span> <span class="st">&quot;grey90&quot;</span>)</span>
<span id="cb89-3"><a href="chapitre2.html#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>, <span class="at">col =</span> <span class="st">&quot;#D1914D&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb89-4"><a href="chapitre2.html#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Martinique&quot;</span>, <span class="at">sources =</span> <span class="st">&quot;&quot;</span>, <span class="at">author =</span> <span class="st">&quot;&quot;</span>, <span class="at">scale =</span> <span class="cn">NULL</span>)</span>
<span id="cb89-5"><a href="chapitre2.html#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p><img src="img/martinique1.png" /></p>
<p>Sur cette carte beaucoup d’espace est perdu à l’est et à l’ouest de l’ile.</p>
<p>La fonction <code>getFigDim()</code> de <code>cartography</code> permet de choisir un ratio hauteur/largeur correspondant à l’emprise d’un objet <code>sf</code> en prenant en compte une largeur (ou hauteur) fixée, les paramètres de marges et la résolution souhaitée.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="chapitre2.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getFigDim</span>(<span class="at">x =</span> mtq, <span class="at">width =</span> <span class="dv">480</span>, <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">1.2</span>,<span class="dv">0</span>), <span class="at">res =</span> <span class="dv">96</span>)</span></code></pre></div>
<pre><code>[1] 480 585</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="chapitre2.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span> <span class="st">&quot;img/martinique2.png&quot;</span>, <span class="at">width =</span> <span class="dv">480</span>, <span class="at">height =</span> <span class="dv">583</span>, <span class="at">res =</span> <span class="dv">96</span>)</span>
<span id="cb92-2"><a href="chapitre2.html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">1.2</span>,<span class="dv">0</span>), <span class="at">bg =</span> <span class="st">&quot;grey90&quot;</span>)</span>
<span id="cb92-3"><a href="chapitre2.html#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>, <span class="at">col =</span> <span class="st">&quot;#D1914D&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb92-4"><a href="chapitre2.html#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Martinique&quot;</span>, <span class="at">sources =</span> <span class="st">&quot;&quot;</span>, <span class="at">author =</span> <span class="st">&quot;&quot;</span>, <span class="at">scale =</span> <span class="cn">NULL</span>)</span>
<span id="cb92-5"><a href="chapitre2.html#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p><img src="img/martinique2.png" /></p>
<p>L’emprise de cette carte est exactement celle de l’île.</p>
</div>
<div id="ajouter-une-image-sur-une-carte" class="section level3" number="2.4.9">
<h3><span class="header-section-number">2.4.9</span> Ajouter une image sur une carte</h3>
<p>Cela peut être utile pour ajouter un logo, un pictogramme. La fonction <code>readPNG()</code> du package <code>png</code> permet l’ajout d’images sur une figure.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="chapitre2.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(png)</span>
<span id="cb93-2"><a href="chapitre2.html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="co"># import de l&#39;image</span></span>
<span id="cb93-3"><a href="chapitre2.html#cb93-3" aria-hidden="true" tabindex="-1"></a>logo <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="st">&quot;img/mapmonster.png&quot;</span>)</span>
<span id="cb93-4"><a href="chapitre2.html#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="co"># dimension de l&#39;image en unité de la carte</span></span>
<span id="cb93-5"><a href="chapitre2.html#cb93-5" aria-hidden="true" tabindex="-1"></a>pp <span class="ot">&lt;-</span> <span class="fu">dim</span>(logo)[<span class="dv">2</span><span class="sc">:</span><span class="dv">1</span>] <span class="sc">*</span> <span class="dv">16</span> </span>
<span id="cb93-6"><a href="chapitre2.html#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Définition d&#39;un point d&#39;encrage de l&#39;image dans la figure, ici</span></span>
<span id="cb93-7"><a href="chapitre2.html#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="co"># le coin inférieur gauche de la bounding box de la martique.</span></span>
<span id="cb93-8"><a href="chapitre2.html#cb93-8" aria-hidden="true" tabindex="-1"></a>xy <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(mtq)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb93-9"><a href="chapitre2.html#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">1.2</span>,<span class="dv">0</span>))</span>
<span id="cb93-10"><a href="chapitre2.html#cb93-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>, <span class="at">col =</span> <span class="st">&quot;#D1914D&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>)</span>
<span id="cb93-11"><a href="chapitre2.html#cb93-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rasterImage</span>(</span>
<span id="cb93-12"><a href="chapitre2.html#cb93-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">image   =</span> logo, </span>
<span id="cb93-13"><a href="chapitre2.html#cb93-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">xleft   =</span> xy[<span class="dv">1</span>], </span>
<span id="cb93-14"><a href="chapitre2.html#cb93-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">ybottom =</span> xy[<span class="dv">2</span>], </span>
<span id="cb93-15"><a href="chapitre2.html#cb93-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">xright  =</span> xy[<span class="dv">1</span>] <span class="sc">+</span> pp[<span class="dv">1</span>], </span>
<span id="cb93-16"><a href="chapitre2.html#cb93-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">ytop    =</span> xy[<span class="dv">2</span>] <span class="sc">+</span> pp[<span class="dv">2</span>]</span>
<span id="cb93-17"><a href="chapitre2.html#cb93-17" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb93-18"><a href="chapitre2.html#cb93-18" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Martinique&quot;</span>, <span class="at">tabtitle =</span> <span class="cn">TRUE</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb93-19"><a href="chapitre2.html#cb93-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">sources =</span> <span class="st">&quot;&quot;</span>, <span class="at">author =</span> <span class="st">&quot;&quot;</span>, <span class="at">scale =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/logo-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="placer-précisément-un-élément-sur-la-carte" class="section level3" number="2.4.10">
<h3><span class="header-section-number">2.4.10</span> Placer précisément un élément sur la carte</h3>
<p>La fonction <code>locator()</code> permet de cliquer sur une figure et d’obtenir les coordonnées d’un point dans le système de coordonnées de la figure (de la carte).</p>
<video width="800" controls="controls">
<source src="img/locator.webm" type="video/webm" />
</video>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="chapitre2.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;darkseagreen3&quot;</span>, <span class="at">border =</span> <span class="st">&quot;darkseagreen4&quot;</span>, </span>
<span id="cb94-2"><a href="chapitre2.html#cb94-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">bg =</span> <span class="st">&quot;#A6CAE0&quot;</span>)</span>
<span id="cb94-3"><a href="chapitre2.html#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="at">x =</span> <span class="dv">694019</span>, <span class="at">y =</span> <span class="dv">1615161</span>, </span>
<span id="cb94-4"><a href="chapitre2.html#cb94-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">labels =</span> <span class="st">&quot;MER</span><span class="sc">\n</span><span class="st">DES</span><span class="sc">\n</span><span class="st">CARAÏBES&quot;</span>, </span>
<span id="cb94-5"><a href="chapitre2.html#cb94-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">&quot;#e3f1f9&quot;</span>, <span class="at">font =</span> <span class="dv">3</span>, <span class="at">srt=</span><span class="dv">20</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/unnamed-chunk-29-1.png" width="384" style="display: block; margin: auto;" /></p>
<p><code>locator()</code>peut être utilisée sur la plupart des graphiques (pas ceux produits avec <code>ggplot2</code>).</p>

<div class="linky">
<a href="https://rgeomatic.hypotheses.org/1837">How to interactively position legends and layout elements on a map with cartography</a>
</div>
</div>
<div id="utiliser-un-fond-de-carte-osm" class="section level3" number="2.4.11">
<h3><span class="header-section-number">2.4.11</span> Utiliser un fond de carte OSM</h3>
<p>La fonction <code>getTiles()</code> permet de télécharger des fonds de cartes OSM et la fonction <code>tilesLayer()</code> permet de les afficher.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="chapitre2.html#cb95-1" aria-hidden="true" tabindex="-1"></a>osm_tiles <span class="ot">&lt;-</span> <span class="fu">getTiles</span>(<span class="at">x =</span> mtq, <span class="at">zoom =</span> <span class="dv">10</span>, <span class="at">crop =</span> <span class="cn">TRUE</span>)</span>
<span id="cb95-2"><a href="chapitre2.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb95-3"><a href="chapitre2.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tilesLayer</span>(osm_tiles)</span>
<span id="cb95-4"><a href="chapitre2.html#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mtext</span>(</span>
<span id="cb95-5"><a href="chapitre2.html#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">side =</span> <span class="dv">1</span>, </span>
<span id="cb95-6"><a href="chapitre2.html#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">line =</span> <span class="sc">-</span><span class="dv">1</span>, </span>
<span id="cb95-7"><a href="chapitre2.html#cb95-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex =</span> .<span class="dv">7</span>,</span>
<span id="cb95-8"><a href="chapitre2.html#cb95-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="st">&quot;© OpenStreetMap contributors.</span><span class="sc">\n</span><span class="st"> Tiles style under CC BY-SA, www.openstreetmap.org/copyright.&quot;</span>,</span>
<span id="cb95-9"><a href="chapitre2.html#cb95-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">col=</span><span class="st">&quot;red&quot;</span></span>
<span id="cb95-10"><a href="chapitre2.html#cb95-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/osmdisplay-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="créer-un-effet-crayonné" class="section level3" number="2.4.12">
<h3><span class="header-section-number">2.4.12</span> Créer un effet crayonné</h3>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="chapitre2.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb96-2"><a href="chapitre2.html#cb96-2" aria-hidden="true" tabindex="-1"></a>mtq_pencil <span class="ot">&lt;-</span> <span class="fu">getPencilLayer</span>(<span class="at">x =</span> mtq)</span>
<span id="cb96-3"><a href="chapitre2.html#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typoLayer</span>(</span>
<span id="cb96-4"><a href="chapitre2.html#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> mtq_pencil, </span>
<span id="cb96-5"><a href="chapitre2.html#cb96-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">var=</span><span class="st">&quot;STATUS&quot;</span>,  </span>
<span id="cb96-6"><a href="chapitre2.html#cb96-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;aquamarine4&quot;</span>, <span class="st">&quot;yellow3&quot;</span>,<span class="st">&quot;wheat&quot;</span>), </span>
<span id="cb96-7"><a href="chapitre2.html#cb96-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">lwd =</span> .<span class="dv">7</span>,</span>
<span id="cb96-8"><a href="chapitre2.html#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.values.order =</span> <span class="fu">c</span>(<span class="st">&quot;Prefecture&quot;</span>,</span>
<span id="cb96-9"><a href="chapitre2.html#cb96-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;Sub-prefecture&quot;</span>, </span>
<span id="cb96-10"><a href="chapitre2.html#cb96-10" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;Simple municipality&quot;</span>),</span>
<span id="cb96-11"><a href="chapitre2.html#cb96-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.pos =</span> <span class="st">&quot;topright&quot;</span>,</span>
<span id="cb96-12"><a href="chapitre2.html#cb96-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.title.txt =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb96-13"><a href="chapitre2.html#cb96-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-14"><a href="chapitre2.html#cb96-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">ldy=</span><span class="dv">2</span>)</span>
<span id="cb96-15"><a href="chapitre2.html#cb96-15" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Statut Administratif&quot;</span>,<span class="at">tabtitle=</span><span class="cn">TRUE</span>,</span>
<span id="cb96-16"><a href="chapitre2.html#cb96-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">author=</span> <span class="st">&quot;INSEE, 2016&quot;</span>, <span class="at">sources=</span><span class="st">&quot;&quot;</span>, </span>
<span id="cb96-17"><a href="chapitre2.html#cb96-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame=</span><span class="cn">FALSE</span>, <span class="at">scale =</span> <span class="dv">5</span>)</span>
<span id="cb96-18"><a href="chapitre2.html#cb96-18" aria-hidden="true" tabindex="-1"></a><span class="fu">north</span>(<span class="at">pos =</span> <span class="st">&quot;topleft&quot;</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/pencil-1.png" width="384" style="display: block; margin: auto;" /></p>

<div class="linky">
<a href="https://rgeomatic.hypotheses.org/1333">Colored Pencil Maps with R</a>
</div>
</div>
<div id="ajouter-un-ombrage-à-une-couche" class="section level3" number="2.4.13">
<h3><span class="header-section-number">2.4.13</span> Ajouter un ombrage à une couche</h3>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="chapitre2.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq) <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">500</span>, <span class="sc">-</span><span class="dv">500</span>), </span>
<span id="cb97-2"><a href="chapitre2.html#cb97-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">&quot;grey50&quot;</span>, <span class="at">border =</span> <span class="cn">NA</span>, <span class="at">bg =</span> <span class="st">&quot;lightblue1&quot;</span>)</span>
<span id="cb97-3"><a href="chapitre2.html#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col=</span><span class="st">&quot;darkseagreen3&quot;</span>, <span class="at">border=</span><span class="st">&quot;darkseagreen4&quot;</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb97-4"><a href="chapitre2.html#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Communes&quot;</span>,<span class="at">tabtitle=</span><span class="cn">TRUE</span>,</span>
<span id="cb97-5"><a href="chapitre2.html#cb97-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">author=</span> <span class="st">&quot;INSEE, 2016&quot;</span>, <span class="at">sources=</span><span class="st">&quot;&quot;</span>, <span class="at">north=</span><span class="cn">TRUE</span>,  </span>
<span id="cb97-6"><a href="chapitre2.html#cb97-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame=</span><span class="cn">FALSE</span>, <span class="at">scale =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/shadow-1.png" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="création-de-cartons" class="section level3" number="2.4.14">
<h3><span class="header-section-number">2.4.14</span> Création de cartons</h3>
<p>Le package <code>mapinsetr</code><span class="citation">(<a href="references.html#ref-R-mapinsetr" role="doc-biblioref">Giraud and Lambert 2018b</a>)</span> est dédié à la crétion de cartons cartographiques. Il n’est pas sur le CRAN pour l’instant, mais on peut l’installer via le package <code>remotes</code>.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="chapitre2.html#cb98-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;riatelab/mapinsetr&quot;</span>)</span></code></pre></div>
<p><code>mapinsetr</code> permet de découper, redimensionner et déplacer une zone d’un fond de carte.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="chapitre2.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapinsetr)</span>
<span id="cb99-2"><a href="chapitre2.html#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cartography)</span>
<span id="cb99-3"><a href="chapitre2.html#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb99-4"><a href="chapitre2.html#cb99-4" aria-hidden="true" tabindex="-1"></a>mtq <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="fu">system.file</span>(<span class="st">&quot;gpkg/mtq.gpkg&quot;</span>, <span class="at">package=</span><span class="st">&quot;cartography&quot;</span>), </span>
<span id="cb99-5"><a href="chapitre2.html#cb99-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb99-6"><a href="chapitre2.html#cb99-6" aria-hidden="true" tabindex="-1"></a>resto <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;data/resto.gpkg&quot;</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb99-7"><a href="chapitre2.html#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Création d&#39;un masque</span></span>
<span id="cb99-8"><a href="chapitre2.html#cb99-8" aria-hidden="true" tabindex="-1"></a>box_FDF <span class="ot">&lt;-</span> <span class="fu">create_mask</span>(<span class="at">bb =</span> <span class="fu">c</span>(<span class="dv">706880</span>, <span class="dv">1615030</span>, <span class="dv">708650</span>, <span class="dv">1616870</span>), </span>
<span id="cb99-9"><a href="chapitre2.html#cb99-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">prj =</span> <span class="fu">st_crs</span>(mtq))</span>
<span id="cb99-10"><a href="chapitre2.html#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Découpage, déplacement et redimentionnement des couches sous le masque</span></span>
<span id="cb99-11"><a href="chapitre2.html#cb99-11" aria-hidden="true" tabindex="-1"></a>zbox_FDF <span class="ot">&lt;-</span> <span class="fu">move_and_resize</span>(</span>
<span id="cb99-12"><a href="chapitre2.html#cb99-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> box_FDF, </span>
<span id="cb99-13"><a href="chapitre2.html#cb99-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">mask =</span> box_FDF, </span>
<span id="cb99-14"><a href="chapitre2.html#cb99-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">xy =</span> <span class="fu">c</span>(<span class="dv">689000</span>, <span class="dv">1603000</span>), </span>
<span id="cb99-15"><a href="chapitre2.html#cb99-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">7</span></span>
<span id="cb99-16"><a href="chapitre2.html#cb99-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb99-17"><a href="chapitre2.html#cb99-17" aria-hidden="true" tabindex="-1"></a>zmtq_FDF <span class="ot">&lt;-</span> <span class="fu">move_and_resize</span>(</span>
<span id="cb99-18"><a href="chapitre2.html#cb99-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> mtq, </span>
<span id="cb99-19"><a href="chapitre2.html#cb99-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">mask =</span> box_FDF, </span>
<span id="cb99-20"><a href="chapitre2.html#cb99-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">xy =</span> <span class="fu">c</span>(<span class="dv">689000</span>, <span class="dv">1603000</span>), </span>
<span id="cb99-21"><a href="chapitre2.html#cb99-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">7</span></span>
<span id="cb99-22"><a href="chapitre2.html#cb99-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb99-23"><a href="chapitre2.html#cb99-23" aria-hidden="true" tabindex="-1"></a>zresto_FDF <span class="ot">&lt;-</span> <span class="fu">move_and_resize</span>(</span>
<span id="cb99-24"><a href="chapitre2.html#cb99-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> resto, </span>
<span id="cb99-25"><a href="chapitre2.html#cb99-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">mask =</span> box_FDF, </span>
<span id="cb99-26"><a href="chapitre2.html#cb99-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">xy =</span> <span class="fu">c</span>(<span class="dv">689000</span>, <span class="dv">1603000</span>), </span>
<span id="cb99-27"><a href="chapitre2.html#cb99-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">7</span></span>
<span id="cb99-28"><a href="chapitre2.html#cb99-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb99-29"><a href="chapitre2.html#cb99-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichage de la carte et des couhes crées</span></span>
<span id="cb99-30"><a href="chapitre2.html#cb99-30" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;lightblue4&quot;</span>, <span class="at">border =</span> <span class="st">&quot;lightblue3&quot;</span>, </span>
<span id="cb99-31"><a href="chapitre2.html#cb99-31" aria-hidden="true" tabindex="-1"></a>     <span class="at">bg =</span> <span class="st">&quot;lightblue1&quot;</span>)</span>
<span id="cb99-32"><a href="chapitre2.html#cb99-32" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(resto), <span class="at">add=</span>T, <span class="at">pch=</span><span class="dv">20</span>, <span class="at">col =</span> <span class="st">&quot;#330A5FFF&quot;</span>, <span class="at">cex =</span> <span class="fl">0.5</span>)</span>
<span id="cb99-33"><a href="chapitre2.html#cb99-33" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(box_FDF), <span class="at">border =</span> <span class="st">&quot;red&quot;</span>, <span class="at">add =</span> T, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb99-34"><a href="chapitre2.html#cb99-34" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(zmtq_FDF), <span class="at">col =</span> <span class="st">&quot;lightblue4&quot;</span>, <span class="at">border =</span> <span class="st">&quot;lightblue3&quot;</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb99-35"><a href="chapitre2.html#cb99-35" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(zresto_FDF), <span class="at">add=</span><span class="cn">TRUE</span>, <span class="at">pch=</span><span class="dv">20</span>, <span class="at">col =</span> <span class="st">&quot;#330A5FFF&quot;</span>, <span class="at">cex =</span> <span class="fl">0.5</span>)</span>
<span id="cb99-36"><a href="chapitre2.html#cb99-36" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(zbox_FDF), <span class="at">border =</span> <span class="st">&quot;red&quot;</span>, <span class="at">add =</span> T, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb99-37"><a href="chapitre2.html#cb99-37" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Carte initiale + couches créées&quot;</span>,<span class="at">tabtitle=</span><span class="cn">TRUE</span>,</span>
<span id="cb99-38"><a href="chapitre2.html#cb99-38" aria-hidden="true" tabindex="-1"></a>            <span class="at">author=</span> <span class="st">&quot;INSEE, 2016&quot;</span>, <span class="at">sources=</span><span class="st">&quot;&quot;</span>, <span class="at">north=</span><span class="cn">TRUE</span>,  </span>
<span id="cb99-39"><a href="chapitre2.html#cb99-39" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame=</span><span class="cn">FALSE</span>, <span class="at">scale =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/inset1-1.png" width="384" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="chapitre2.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de couches unqiues comprenant le zoom</span></span>
<span id="cb100-2"><a href="chapitre2.html#cb100-2" aria-hidden="true" tabindex="-1"></a>resto <span class="ot">&lt;-</span> <span class="fu">inset_rbinder</span>(<span class="at">l =</span> <span class="fu">list</span>(resto, zresto_FDF))</span>
<span id="cb100-3"><a href="chapitre2.html#cb100-3" aria-hidden="true" tabindex="-1"></a>mtq <span class="ot">&lt;-</span> <span class="fu">inset_rbinder</span>(<span class="at">l =</span> <span class="fu">list</span>(mtq, zmtq_FDF))</span>
<span id="cb100-4"><a href="chapitre2.html#cb100-4" aria-hidden="true" tabindex="-1"></a>box <span class="ot">&lt;-</span> <span class="fu">inset_rbinder</span>(<span class="at">l =</span> <span class="fu">list</span>(box_FDF, zbox_FDF))</span>
<span id="cb100-5"><a href="chapitre2.html#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(mtq), <span class="at">col =</span> <span class="st">&quot;lightblue4&quot;</span>, <span class="at">border =</span> <span class="st">&quot;lightblue3&quot;</span>, </span>
<span id="cb100-6"><a href="chapitre2.html#cb100-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">bg =</span> <span class="st">&quot;lightblue1&quot;</span>)</span>
<span id="cb100-7"><a href="chapitre2.html#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(resto), <span class="at">add=</span>T, <span class="at">pch=</span><span class="dv">20</span>, <span class="at">col =</span> <span class="st">&quot;#330A5FFF&quot;</span>, <span class="at">cex =</span> <span class="fl">0.5</span>)</span>
<span id="cb100-8"><a href="chapitre2.html#cb100-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(box), <span class="at">border =</span> <span class="st">&quot;red&quot;</span>, <span class="at">add =</span> T, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb100-9"><a href="chapitre2.html#cb100-9" aria-hidden="true" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Carte finale avec carton&quot;</span>,<span class="at">tabtitle=</span><span class="cn">TRUE</span>,</span>
<span id="cb100-10"><a href="chapitre2.html#cb100-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">author=</span> <span class="st">&quot;INSEE, 2016&quot;</span>, <span class="at">sources=</span><span class="st">&quot;&quot;</span>, <span class="at">north=</span><span class="cn">TRUE</span>,  </span>
<span id="cb100-11"><a href="chapitre2.html#cb100-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">frame=</span><span class="cn">FALSE</span>, <span class="at">scale =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="Cartographie_avec_R_files/figure-html/inset1-2.png" width="384" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="exercices-1" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Exercices</h2>
<p><a href="https://rcarto.github.io/carto_avec_r_exo/#2_cartographie_th%C3%A9matique">Exercices de cartographie thématique</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapitre1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapitre3.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {},
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
